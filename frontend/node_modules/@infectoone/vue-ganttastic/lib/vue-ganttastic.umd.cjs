(function(T,Y){typeof exports=="object"&&typeof module<"u"?Y(exports,require("dayjs"),require("vue")):typeof define=="function"&&define.amd?define(["exports","dayjs","vue"],Y):(T=typeof globalThis<"u"?globalThis:T||self,Y(T.VueGanttastic={},T.dayjs,T.Vue))})(this,function(T,Y,t){"use strict";const A=(e=>e&&typeof e=="object"&&"default"in e?e:{default:e})(Y);var V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},at={exports:{}};(function(e,l){(function(a,s){e.exports=s()})(V,function(){return function(a,s){s.prototype.isSameOrBefore=function(w,d){return this.isSame(w,d)||this.isBefore(w,d)}}})})(at);const St=at.exports;var ot={exports:{}};(function(e,l){(function(a,s){e.exports=s()})(V,function(){return function(a,s){s.prototype.isSameOrAfter=function(w,d){return this.isSame(w,d)||this.isAfter(w,d)}}})})(ot);const Tt=ot.exports;var it={exports:{}};(function(e,l){(function(a,s){e.exports=s()})(V,function(){return function(a,s,w){s.prototype.isBetween=function(d,g,p,f){var r=w(d),n=w(g),i=(f=f||"()")[0]==="(",c=f[1]===")";return(i?this.isAfter(r,p):!this.isBefore(r,p))&&(c?this.isBefore(n,p):!this.isAfter(n,p))||(i?this.isBefore(r,p):!this.isAfter(r,p))&&(c?this.isAfter(n,p):!this.isBefore(n,p))}}})})(it);const Mt=it.exports;var st={exports:{}};(function(e,l){(function(a,s){e.exports=s()})(V,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,w=/\d\d/,d=/\d\d?/,g=/\d*[^-_:/,()\s\d]+/,p={},f=function(b){return(b=+b)+(b>68?1900:2e3)},r=function(b){return function(u){this[b]=+u}},n=[/[+-]\d\d:?(\d\d)?|Z/,function(b){(this.zone||(this.zone={})).offset=function(u){if(!u||u==="Z")return 0;var E=u.match(/([+-]|\d\d)/g),y=60*E[1]+(+E[2]||0);return y===0?0:E[0]==="+"?-y:y}(b)}],i=function(b){var u=p[b];return u&&(u.indexOf?u:u.s.concat(u.f))},c=function(b,u){var E,y=p.meridiem;if(y){for(var m=1;m<=24;m+=1)if(b.indexOf(y(m,0,u))>-1){E=m>12;break}}else E=b===(u?"pm":"PM");return E},v={A:[g,function(b){this.afternoon=c(b,!1)}],a:[g,function(b){this.afternoon=c(b,!0)}],S:[/\d/,function(b){this.milliseconds=100*+b}],SS:[w,function(b){this.milliseconds=10*+b}],SSS:[/\d{3}/,function(b){this.milliseconds=+b}],s:[d,r("seconds")],ss:[d,r("seconds")],m:[d,r("minutes")],mm:[d,r("minutes")],H:[d,r("hours")],h:[d,r("hours")],HH:[d,r("hours")],hh:[d,r("hours")],D:[d,r("day")],DD:[w,r("day")],Do:[g,function(b){var u=p.ordinal,E=b.match(/\d+/);if(this.day=E[0],u)for(var y=1;y<=31;y+=1)u(y).replace(/\[|\]/g,"")===b&&(this.day=y)}],M:[d,r("month")],MM:[w,r("month")],MMM:[g,function(b){var u=i("months"),E=(i("monthsShort")||u.map(function(y){return y.slice(0,3)})).indexOf(b)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[g,function(b){var u=i("months").indexOf(b)+1;if(u<1)throw new Error;this.month=u%12||u}],Y:[/[+-]?\d+/,r("year")],YY:[w,function(b){this.year=f(b)}],YYYY:[/\d{4}/,r("year")],Z:n,ZZ:n};function k(b){var u,E;u=b,E=p&&p.formats;for(var y=(b=u.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(C,O,D){var S=D&&D.toUpperCase();return O||E[D]||a[D]||E[S].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,L,$){return L||$.slice(1)})})).match(s),m=y.length,x=0;x<m;x+=1){var o=y[x],B=v[o],h=B&&B[0],_=B&&B[1];y[x]=_?{regex:h,parser:_}:o.replace(/^\[|\]$/g,"")}return function(C){for(var O={},D=0,S=0;D<m;D+=1){var M=y[D];if(typeof M=="string")S+=M.length;else{var L=M.regex,$=M.parser,I=C.slice(S),N=L.exec(I)[0];$.call(O,N),C=C.replace(N,"")}}return function(j){var G=j.afternoon;if(G!==void 0){var H=j.hours;G?H<12&&(j.hours+=12):H===12&&(j.hours=0),delete j.afternoon}}(O),O}}return function(b,u,E){E.p.customParseFormat=!0,b&&b.parseTwoDigitYear&&(f=b.parseTwoDigitYear);var y=u.prototype,m=y.parse;y.parse=function(x){var o=x.date,B=x.utc,h=x.args;this.$u=B;var _=h[1];if(typeof _=="string"){var C=h[2]===!0,O=h[3]===!0,D=C||O,S=h[2];O&&(S=h[2]),p=this.$locale(),!C&&S&&(p=E.Ls[S]),this.$d=function(I,N,j){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*I);var G=k(N)(I),H=G.year,z=G.month,de=G.day,fe=G.hours,ue=G.minutes,ge=G.seconds,pe=G.milliseconds,Dt=G.zone,X=new Date,Z=de||(H||z?1:X.getDate()),J=H||X.getFullYear(),q=0;H&&!z||(q=z>0?z-1:X.getMonth());var tt=fe||0,et=ue||0,nt=ge||0,rt=pe||0;return Dt?new Date(Date.UTC(J,q,Z,tt,et,nt,rt+60*Dt.offset*1e3)):j?new Date(Date.UTC(J,q,Z,tt,et,nt,rt)):new Date(J,q,Z,tt,et,nt,rt)}catch{return new Date("")}}(o,_,B),this.init(),S&&S!==!0&&(this.$L=this.locale(S).$L),D&&o!=this.format(_)&&(this.$d=new Date("")),p={}}else if(_ instanceof Array)for(var M=_.length,L=1;L<=M;L+=1){h[1]=_[L-1];var $=E.apply(this,h);if($.isValid()){this.$d=$.$d,this.$L=$.$L,this.init();break}L===M&&(this.$d=new Date(""))}else m.call(this,x)}}})})(st);const Lt=st.exports,lt=Symbol("CHART_ROWS_KEY"),ct=Symbol("CONFIG_KEY"),dt=Symbol("EMIT_BAR_EVENT_KEY"),ft=Symbol("BAR_CONTAINER_KEY");function R(){const e=t.inject(ct);if(!e)throw Error("Failed to inject config!");return e}const ut="YYYY-MM-DD HH:mm";function F(e=R()){const{chartStart:l,chartEnd:a,barStart:s,barEnd:w,dateFormat:d}=e,g=t.computed(()=>f(l.value)),p=t.computed(()=>f(a.value)),f=(n,i)=>{let c;if(i!==void 0&&typeof n!="string"&&!(n instanceof Date)&&(c=i==="start"?n[s.value]:n[w.value]),typeof n=="string")c=n;else if(n instanceof Date)return A.default(n);const v=d.value||ut;return A.default(c,v,!0)};return{chartStartDayjs:g,chartEndDayjs:p,toDayjs:f,format:(n,i)=>i===!1?n instanceof Date?n:A.default(n).toDate():(typeof n=="string"||n instanceof Date?f(n):n).format(i)}}function gt(){const{precision:e}=R(),{chartStartDayjs:l,chartEndDayjs:a}=F(),s=t.computed(()=>{switch(e==null?void 0:e.value){case"hour":return"day";case"day":return"month";case"month":return"year";default:throw new Error("Precision prop incorrect. Must be one of the following: 'hour', 'day', 'month'")}}),w={hour:"HH",date:"DD.MMM ",day:"DD.MMM ",month:"MMMM YYYY",year:"YYYY"};return{timeaxisUnits:t.computed(()=>{const g=[],p=[],f=s.value==="day"?"date":s.value,r=e.value;let n=l.value.startOf(r);const i=a.value.diff(l.value,"minutes",!0);let c=0,v=n[f]();for(;n.isBefore(a.value)||n.isSame(a.value);){if(n[f]()!==v){let y=0;if(g.length===0)y=n.startOf(f).diff(l.value,"minutes",!0)/i*100;else if(n.isSameOrAfter(a.value))y=a.value.diff(n.subtract(1,f).startOf(f),"minutes",!0)/i*100;else{const x=n.startOf(f),o=n.subtract(1,f).startOf(f);y=x.diff(o,"minutes",!0)/i*100}const m=n.subtract(1,f);g.push({label:m.format(w[f]),value:String(v),date:m.toDate(),width:String(y)+"%"}),c=0,v=n[f]()}let u=0;p.length===0?u=n.endOf(r).diff(l.value,"minutes",!0)/i*100:n.add(1,r).isSameOrAfter(a.value)?u=a.value.diff(n.startOf(r),"minutes",!0)/i*100:u=n.endOf(r).diff(n.startOf(r),"minutes",!0)/i*100,p.push({label:n.format(w[r]),value:String(n[r==="day"?"date":r]()),date:n.toDate(),width:String(u)+"%"});const E=n;n=n.add(1,r),(n.isBefore(a.value)||n.isSame(a.value))&&(c+=n.diff(E,"minutes",!0))}const k=a.value.isSame(a.value.startOf(f))?a.value[f]()-1:a.value[f]();return g.some(u=>u.value===String(k))||(c+=a.value.diff(n.subtract(1,r),"minutes",!0),g.push({label:a.value.format(w[f]),value:String(v),date:a.value.toDate(),width:`${c/i*100}%`})),{upperUnits:g,lowerUnits:p}})}}const Rt={class:"g-timeaxis"},$t={class:"g-timeunits-container"},Gt={class:"g-timeunits-container"},It=t.defineComponent({__name:"GGanttTimeaxis",setup(e){const{precision:l,colors:a}=R(),{timeaxisUnits:s}=gt();return(w,d)=>(t.openBlock(),t.createElementBlock("div",Rt,[t.createElementVNode("div",$t,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s).upperUnits,({label:g,value:p,date:f,width:r},n)=>(t.openBlock(),t.createElementBlock("div",{key:g,class:"g-upper-timeunit",style:t.normalizeStyle({background:n%2===0?t.unref(a).primary:t.unref(a).secondary,color:t.unref(a).text,width:r})},[t.renderSlot(w.$slots,"upper-timeunit",{label:g,value:p,date:f},()=>[t.createTextVNode(t.toDisplayString(g),1)])],4))),128))]),t.createElementVNode("div",Gt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s).lowerUnits,({label:g,value:p,date:f,width:r},n)=>(t.openBlock(),t.createElementBlock("div",{key:g,class:"g-timeunit",style:t.normalizeStyle({background:n%2===0?t.unref(a).ternary:t.unref(a).quartenary,color:t.unref(a).text,flexDirection:t.unref(l)==="hour"?"column":"row",alignItems:t.unref(l)==="hour"?"":"center",width:r})},[t.renderSlot(w.$slots,"timeunit",{label:g,value:p,date:f},()=>[t.createTextVNode(t.toDisplayString(g),1)]),t.unref(l)==="hour"?(t.openBlock(),t.createElementBlock("div",{key:0,class:"g-timeaxis-hour-pin",style:t.normalizeStyle({background:t.unref(a).text})},null,4)):t.createCommentVNode("",!0)],4))),128))])]))}}),me="",Yt={class:"g-grid-container"},At=t.defineComponent({__name:"GGanttGrid",props:{highlightedUnits:{}},setup(e){const{colors:l}=R(),{timeaxisUnits:a}=gt();return(s,w)=>(t.openBlock(),t.createElementBlock("div",Yt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(a).lowerUnits,({label:d,value:g,width:p})=>{var f;return t.openBlock(),t.createElementBlock("div",{key:d,class:"g-grid-line",style:t.normalizeStyle({width:p,background:(f=s.highlightedUnits)!=null&&f.includes(Number(g))?t.unref(l).hoverHighlight:void 0})},null,4)}),128))]))}}),he="",jt="cadetblue",Nt=t.defineComponent({__name:"GGanttBarTooltip",props:{bar:{},modelValue:{type:Boolean}},setup(e){const l=e,a={hour:"HH:mm",day:"DD. MMM HH:mm",month:"DD. MMMM YYYY"},{bar:s}=t.toRefs(l),{precision:w,font:d,barStart:g,barEnd:p,rowHeight:f}=R(),r=t.ref("0px"),n=t.ref("0px");t.watch(()=>l.bar,async()=>{var o;await t.nextTick();const u=((o=s==null?void 0:s.value)==null?void 0:o.ganttBarConfig.id)||"";if(!u)return;const E=document.getElementById(u),{top:y,left:m}=(E==null?void 0:E.getBoundingClientRect())||{top:0,left:0},x=Math.max(m,10);r.value=`${y+f.value-10}px`,n.value=`${x}px`},{deep:!0,immediate:!0});const i=t.computed(()=>{var u,E;return((E=(u=s==null?void 0:s.value)==null?void 0:u.ganttBarConfig.style)==null?void 0:E.background)||jt}),{toDayjs:c}=F(),v=t.computed(()=>{var u;return(u=s.value)==null?void 0:u[g.value]}),k=t.computed(()=>{var u;return(u=s.value)==null?void 0:u[p.value]}),b=t.computed(()=>{if(!(s!=null&&s.value))return"";const u=a[w.value],E=c(v.value).format(u),y=c(k.value).format(u);return`${E} \u2013 ${y}`});return(u,E)=>(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.createVNode(t.Transition,{name:"g-fade",mode:"out-in"},{default:t.withCtx(()=>[u.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"g-gantt-tooltip",style:t.normalizeStyle({top:r.value,left:n.value,fontFamily:t.unref(d)})},[t.createElementVNode("div",{class:"g-gantt-tooltip-color-dot",style:t.normalizeStyle({background:i.value})},null,4),t.renderSlot(u.$slots,"default",{bar:t.unref(s),barStart:v.value,barEnd:k.value},()=>[t.createTextVNode(t.toDisplayString(b.value),1)])],4)):t.createCommentVNode("",!0)]),_:3})]))}}),ye="",pt={default:{primary:"#eeeeee",secondary:"#E0E0E0",ternary:"#F5F5F5",quartenary:"#ededed",hoverHighlight:"rgba(204, 216, 219, 0.5)",text:"#404040",background:"white"},creamy:{primary:"#ffe8d9",secondary:"#fcdcc5",ternary:"#fff6f0",quartenary:"#f7ece6",hoverHighlight:"rgba(230, 221, 202, 0.5)",text:"#542d05",background:"white"},crimson:{primary:"#a82039",secondary:"#c41238",ternary:"#db4f56",quartenary:"#ce5f64",hoverHighlight:"rgba(196, 141, 141, 0.5)",text:"white",background:"white"},dark:{primary:"#404040",secondary:"#303030",ternary:"#353535",quartenary:"#383838",hoverHighlight:"rgba(159, 160, 161, 0.5)",text:"white",background:"#525252",toast:"#1f1f1f"},flare:{primary:"#e08a38",secondary:"#e67912",ternary:"#5e5145",quartenary:"#665648",hoverHighlight:"rgba(196, 141, 141, 0.5)",text:"white",background:"white"},fuchsia:{primary:"#de1d5a",secondary:"#b50b41",ternary:"#ff7da6",quartenary:"#f2799f",hoverHighlight:"rgba(196, 141, 141, 0.5)",text:"white",background:"white"},grove:{primary:"#3d9960",secondary:"#288542",ternary:"#72b585",quartenary:"#65a577",hoverHighlight:"rgba(160, 219, 171, 0.5)",text:"white",background:"white"},"material-blue":{primary:"#0D47A1",secondary:"#1565C0",ternary:"#42a5f5",quartenary:"#409fed",hoverHighlight:"rgba(110, 165, 196, 0.5)",text:"white",background:"white"},sky:{primary:"#b5e3ff",secondary:"#a1d6f7",ternary:"#d6f7ff",quartenary:"#d0edf4",hoverHighlight:"rgba(193, 202, 214, 0.5)",text:"#022c47",background:"white"},slumber:{primary:"#2a2f42",secondary:"#2f3447",ternary:"#35394d",quartenary:"#2c3044",hoverHighlight:"rgba(179, 162, 127, 0.5)",text:"#ffe0b3",background:"#38383b",toast:"#1f1f1f"},vue:{primary:"#258a5d",secondary:"#41B883",ternary:"#35495E",quartenary:"#2a3d51",hoverHighlight:"rgba(160, 219, 171, 0.5)",text:"white",background:"white"}};var mt;const P=typeof window<"u";P&&((mt=window==null?void 0:window.navigator)==null?void 0:mt.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ht(e){return typeof e=="function"?e():t.unref(e)}function Ft(e){return e}function Pt(e){return t.getCurrentScope()?(t.onScopeDispose(e),!0):!1}function Ut(e,l=!0){t.getCurrentInstance()?t.onMounted(e):l?e():t.nextTick(e)}function ht(e){var l;const a=Ht(e);return(l=a==null?void 0:a.$el)!=null?l:a}const Vt=P?window:void 0;P&&window.document,P&&window.navigator,P&&window.location;function zt(e,l=!1){const a=t.ref(),s=()=>a.value=Boolean(e());return s(),Ut(s,l),a}const W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K="__vueuse_ssr_handlers__";W[K]=W[K]||{},W[K];var yt=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Kt=(e,l)=>{var a={};for(var s in e)qt.call(e,s)&&l.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&yt)for(var s of yt(e))l.indexOf(s)<0&&Wt.call(e,s)&&(a[s]=e[s]);return a};function Qt(e,l,a={}){const s=a,{window:w=Vt}=s,d=Kt(s,["window"]);let g;const p=zt(()=>w&&"ResizeObserver"in w),f=()=>{g&&(g.disconnect(),g=void 0)},r=t.watch(()=>ht(e),i=>{f(),p.value&&w&&i&&(g=new ResizeObserver(l),g.observe(i,d))},{immediate:!0,flush:"post"}),n=()=>{f(),r()};return Pt(n),{isSupported:p,stop:n}}function Xt(e,l={width:0,height:0},a={}){const s=t.ref(l.width),w=t.ref(l.height);return Qt(e,([d])=>{s.value=d.contentRect.width,w.value=d.contentRect.height},a),t.watch(()=>ht(e),d=>{s.value=d?l.width:0,w.value=d?l.height:0}),{width:s,height:w}}var bt;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(bt||(bt={}));var Zt=Object.defineProperty,wt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,Bt=(e,l,a)=>l in e?Zt(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,ee=(e,l)=>{for(var a in l||(l={}))Jt.call(l,a)&&Bt(e,a,l[a]);if(wt)for(var a of wt(l))te.call(l,a)&&Bt(e,a,l[a]);return e};ee({linear:Ft},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const ne={class:"g-gantt-rows-container"},vt=t.defineComponent({__name:"GGanttChart",props:{chartStart:{},chartEnd:{},precision:{default:"day"},barStart:{},barEnd:{},dateFormat:{type:[String,Boolean],default:ut},width:{default:"100%"},hideTimeaxis:{type:Boolean,default:!1},colorScheme:{default:"default"},grid:{type:Boolean,default:!1},pushOnOverlap:{type:Boolean,default:!1},noOverlap:{type:Boolean,default:!1},rowHeight:{default:40},highlightedUnits:{default:()=>[]},font:{default:"inherit"}},emits:["click-bar","mousedown-bar","mouseup-bar","dblclick-bar","mouseenter-bar","mouseleave-bar","dragstart-bar","drag-bar","dragend-bar","contextmenu-bar"],setup(e,{emit:l}){const a=e,{width:s,font:w,colorScheme:d}=t.toRefs(a),g=t.useSlots(),p=t.computed(()=>typeof d.value!="string"?d.value:pt[d.value]||pt.default),f=()=>{var x;const y=(x=g.default)==null?void 0:x.call(g),m=[];return y&&y.forEach(o=>{var B;if((B=o.props)!=null&&B.bars){const h=o.props.bars;m.push(h)}else Array.isArray(o.children)&&o.children.forEach(h=>{var C;const _=h;if((C=_==null?void 0:_.props)!=null&&C.bars){const O=_.props.bars;m.push(O)}})}),m},r=t.ref(!1),n=t.ref(!1),i=t.ref(void 0);let c;const v=y=>{c&&clearTimeout(c),c=setTimeout(()=>{r.value=!0},800),i.value=y},k=()=>{clearTimeout(c),r.value=!1},b=(y,m,x,o)=>{switch(y.type){case"click":l("click-bar",{bar:m,e:y,datetime:x});break;case"mousedown":l("mousedown-bar",{bar:m,e:y,datetime:x});break;case"mouseup":l("mouseup-bar",{bar:m,e:y,datetime:x});break;case"dblclick":l("dblclick-bar",{bar:m,e:y,datetime:x});break;case"mouseenter":v(m),l("mouseenter-bar",{bar:m,e:y});break;case"mouseleave":k(),l("mouseleave-bar",{bar:m,e:y});break;case"dragstart":n.value=!0,l("dragstart-bar",{bar:m,e:y});break;case"drag":l("drag-bar",{bar:m,e:y});break;case"dragend":n.value=!1,l("dragend-bar",{bar:m,e:y,movedBars:o});break;case"contextmenu":l("contextmenu-bar",{bar:m,e:y,datetime:x});break}},u=t.ref(null),E=Xt(u);return t.provide(lt,f),t.provide(ct,{...t.toRefs(a),colors:p,chartSize:E}),t.provide(dt,b),(y,m)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"ganttChart",ref:u,class:"g-gantt-chart",style:t.normalizeStyle({width:t.unref(s),background:p.value.background,fontFamily:t.unref(w)})},[y.hideTimeaxis?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(It,{key:0},{"upper-timeunit":t.withCtx(({label:x,value:o,date:B})=>[t.renderSlot(y.$slots,"upper-timeunit",{label:x,value:o,date:B})]),timeunit:t.withCtx(({label:x,value:o,date:B})=>[t.renderSlot(y.$slots,"timeunit",{label:x,value:o,date:B})]),_:3})),y.grid?(t.openBlock(),t.createBlock(At,{key:1,"highlighted-units":y.highlightedUnits},null,8,["highlighted-units"])):t.createCommentVNode("",!0),t.createElementVNode("div",ne,[t.renderSlot(y.$slots,"default")]),t.createVNode(Nt,{"model-value":r.value||n.value,bar:i.value},{default:t.withCtx(()=>[t.renderSlot(y.$slots,"bar-tooltip",{bar:i.value})]),_:3},8,["model-value","bar"])],4))}}),we="";function Q(e=R()){const{dateFormat:l,chartSize:a}=e,{chartStartDayjs:s,chartEndDayjs:w,toDayjs:d,format:g}=F(e),p=t.computed(()=>w.value.diff(s.value,"minutes"));return{mapTimeToPosition:n=>{const i=a.width.value||0,c=d(n).diff(s.value,"minutes",!0);return Math.ceil(c/p.value*i)},mapPositionToTime:n=>{const i=a.width.value||0,c=n/i*p.value;return g(s.value.add(c,"minutes"),l.value)}}}function xt(e,l=()=>null,a=()=>null,s=R()){const{barStart:w,barEnd:d,pushOnOverlap:g}=s,p=t.ref(!1);let f=0,r;const{mapPositionToTime:n}=Q(s),{toDayjs:i}=F(s),c=m=>{const x=document.getElementById(e.ganttBarConfig.id);if(!x)return;switch(f=m.clientX-(x.getBoundingClientRect().left||0),m.target.className){case"g-gantt-bar-handle-left":document.body.style.cursor="ew-resize",r=b;break;case"g-gantt-bar-handle-right":document.body.style.cursor="ew-resize",r=u;break;default:r=k}p.value=!0,window.addEventListener("mousemove",r),window.addEventListener("mouseup",y)},v=()=>{var o;const m=document.getElementById(e.ganttBarConfig.id),x=(o=m==null?void 0:m.closest(".g-gantt-row-bars-container"))==null?void 0:o.getBoundingClientRect();return{barElement:m,barContainer:x}},k=m=>{const{barElement:x,barContainer:o}=v();if(!x||!o)return;const B=x.getBoundingClientRect().width,h=m.clientX-o.left-f,_=h+B;E(h,_)||(e[w.value]=n(h),e[d.value]=n(_),l(m,e))},b=m=>{const{barElement:x,barContainer:o}=v();if(!x||!o)return;const B=m.clientX-o.left,h=n(B);i(h).isSameOrAfter(i(e,"end"))||(e[w.value]=h,l(m,e))},u=m=>{const{barElement:x,barContainer:o}=v();if(!x||!o)return;const B=m.clientX-o.left,h=n(B);i(h).isSameOrBefore(i(e,"start"))||(e[d.value]=h,l(m,e))},E=(m,x)=>{if(!g.value)return!1;const o=e.ganttBarConfig.dragLimitLeft,B=e.ganttBarConfig.dragLimitRight;return m&&o!=null&&m<o||x&&B!=null&&x>B},y=m=>{p.value=!1,document.body.style.cursor="",window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",y),a(m,e)};return{isDragging:p,initDrag:c}}function Et(){const e=t.inject(lt);if(!e)throw Error("Failed to inject getChartRows!");return e}function _t(){const e=t.inject(dt);if(!e)throw Error("Failed to inject emitBarEvent!");return e}function re(){const e=R(),l=Et(),a=_t(),{pushOnOverlap:s,barStart:w,barEnd:d,noOverlap:g,dateFormat:p}=e,f=new Map,{toDayjs:r,format:n}=F(),i=(o,B)=>{const{initDrag:h}=xt(o,v,y,e);a({...B,type:"dragstart"},o),h(B),m(o)},c=(o,B)=>{const h=o.ganttBarConfig.bundle;h!=null&&(l().forEach(_=>{_.forEach(C=>{if(C.ganttBarConfig.bundle===h){const O=C===o?y:()=>null,{initDrag:D}=xt(C,v,O,e);D(B),m(C)}})}),a({...B,type:"dragstart"},o))},v=(o,B)=>{a({...o,type:"drag"},B),k(B)},k=o=>{if(!(s!=null&&s.value))return;let B=o,{overlapBar:h,overlapType:_}=b(B);for(;h;){m(h);const C=r(B[w.value]),O=r(B[d.value]),D=r(h[w.value]),S=r(h[d.value]);let M;switch(_){case"left":M=S.diff(C,"minutes",!0),h[d.value]=n(B[w.value],p.value),h[w.value]=n(D.subtract(M,"minutes"),p.value);break;case"right":M=O.diff(D,"minutes",!0),h[w.value]=n(O,p.value),h[d.value]=n(S.add(M,"minutes"),p.value);break;default:console.warn("Vue-Ganttastic: One bar is inside of the other one! This should never occur while push-on-overlap is active!");return}h&&(_==="left"||_==="right")&&u(h,M,_),B=h,{overlapBar:h,overlapType:_}=b(h)}},b=o=>{let B,h,_;const C=l().find(L=>L.includes(o))||[],O=r(o[w.value]),D=r(o[d.value]);return{overlapBar:C.find(L=>{if(L===o)return!1;const $=r(L[w.value]),I=r(L[d.value]);return B=O.isBetween($,I),h=D.isBetween($,I),_=$.isBetween(O,D)||I.isBetween(O,D),B||h||_}),overlapType:B?"left":h?"right":_?"between":null}},u=(o,B,h)=>{m(o),o.ganttBarConfig.bundle&&l().forEach(_=>{_.forEach(C=>{C.ganttBarConfig.bundle===o.ganttBarConfig.bundle&&C!==o&&(m(C),E(C,B,h))})})},E=(o,B,h)=>{switch(h){case"left":o[w.value]=n(r(o,"start").subtract(B,"minutes"),p.value),o[d.value]=n(r(o,"end").subtract(B,"minutes"),p.value);break;case"right":o[w.value]=n(r(o,"start").add(B,"minutes"),p.value),o[d.value]=n(r(o,"end").add(B,"minutes"),p.value)}k(o)},y=(o,B)=>{x();const h={...o,type:"dragend"};a(h,B,void 0,new Map(f)),f.clear()},m=o=>{if(!f.has(o)){const B=o[w.value],h=o[d.value];f.set(o,{oldStart:B,oldEnd:h})}},x=()=>{if(s.value||!g.value)return;let o=!1;f.forEach((B,h)=>{const{overlapBar:_}=b(h);_!=null&&(o=!0)}),o&&f.forEach(({oldStart:B,oldEnd:h},_)=>{_[w.value]=B,_[d.value]=h})};return{initDragOfBar:i,initDragOfBundle:c}}function ae(){const{pushOnOverlap:e}=R(),l=Et(),a=g=>{const p=[];return g!=null&&l().forEach(f=>{f.forEach(r=>{r.ganttBarConfig.bundle===g&&p.push(r)})}),p},s=g=>{if(!e.value||g.ganttBarConfig.pushOnOverlap===!1)return;for(const f of["left","right"]){const r=f,{gapDistanceSoFar:n,bundleBarsAndGapDist:i}=w(g,0,r);let c=n;const v=i;if(!v)continue;for(let b=0;b<v.length;b++){const u=v[b].bar,E=v[b].gapDistance;a(u.ganttBarConfig.bundle).filter(m=>m!==u).forEach(m=>{const x=w(m,E,r),o=x.gapDistanceSoFar,B=x.bundleBarsAndGapDist;o!=null&&(!c||o<c)&&(c=o),B.forEach(h=>{v.find(_=>_.bar===h.bar)||v.push(h)})})}const k=document.getElementById(g.ganttBarConfig.id);c!=null&&r==="left"?g.ganttBarConfig.dragLimitLeft=k.offsetLeft-c:c!=null&&r==="right"&&(g.ganttBarConfig.dragLimitRight=k.offsetLeft+k.offsetWidth+c)}a(g.ganttBarConfig.bundle).forEach(f=>{f.ganttBarConfig.dragLimitLeft=g.ganttBarConfig.dragLimitLeft,f.ganttBarConfig.dragLimitRight=g.ganttBarConfig.dragLimitRight})},w=(g,p=0,f)=>{const r=g.ganttBarConfig.bundle?[{bar:g,gapDistance:p}]:[];let n=g,i=d(n,f);if(f==="left")for(;i;){const c=document.getElementById(n.ganttBarConfig.id),v=document.getElementById(i.ganttBarConfig.id),k=v.offsetLeft+v.offsetWidth;if(p+=c.offsetLeft-k,i.ganttBarConfig.immobile)return{gapDistanceSoFar:p,bundleBarsAndGapDist:r};i.ganttBarConfig.bundle&&r.push({bar:i,gapDistance:p}),n=i,i=d(i,"left")}if(f==="right")for(;i;){const c=document.getElementById(n.ganttBarConfig.id),v=document.getElementById(i.ganttBarConfig.id),k=c.offsetLeft+c.offsetWidth;if(p+=v.offsetLeft-k,i.ganttBarConfig.immobile)return{gapDistanceSoFar:p,bundleBarsAndGapDist:r};i.ganttBarConfig.bundle&&r.push({bar:i,gapDistance:p}),n=i,i=d(i,"right")}return{gapDistanceSoFar:null,bundleBarsAndGapDist:r}},d=(g,p)=>{const f=document.getElementById(g.ganttBarConfig.id),r=l().find(i=>i.includes(g))||[];let n=[];return p==="left"?n=r.filter(i=>{const c=document.getElementById(i.ganttBarConfig.id);return c&&c.offsetLeft<f.offsetLeft&&i.ganttBarConfig.pushOnOverlap!==!1}):n=r.filter(i=>{const c=document.getElementById(i.ganttBarConfig.id);return c&&c.offsetLeft>f.offsetLeft&&i.ganttBarConfig.pushOnOverlap!==!1}),n.length>0?n.reduce((i,c)=>{const v=document.getElementById(i.ganttBarConfig.id),k=document.getElementById(c.ganttBarConfig.id),b=Math.abs(v.offsetLeft-f.offsetLeft),u=Math.abs(k.offsetLeft-f.offsetLeft);return b<u?i:c},n[0]):null};return{setDragLimitsOfGanttBar:s}}const oe=["id"],ie={class:"g-gantt-bar-label"},se=t.createElementVNode("div",{class:"g-gantt-bar-handle-left"},null,-1),le=t.createElementVNode("div",{class:"g-gantt-bar-handle-right"},null,-1),ce=t.defineComponent({__name:"GGanttBar",props:{bar:{}},setup(e){const l=e,a=_t(),s=R(),{rowHeight:w}=s,{bar:d}=t.toRefs(l),{mapTimeToPosition:g,mapPositionToTime:p}=Q(),{initDragOfBar:f,initDragOfBundle:r}=re(),{setDragLimitsOfGanttBar:n}=ae(),i=t.ref(!1),c=t.computed(()=>d.value.ganttBarConfig);function v(C){c.value.bundle!=null?r(d.value,C):f(d.value,C),i.value=!0}const k=()=>{n(d.value),!c.value.immobile&&(window.addEventListener("mousemove",v,{once:!0}),window.addEventListener("mouseup",()=>{window.removeEventListener("mousemove",v),i.value=!1},{once:!0}))},b=t.inject(ft),u=C=>{var S;C.preventDefault(),C.type==="mousedown"&&k();const O=(S=b==null?void 0:b.value)==null?void 0:S.getBoundingClientRect();if(!O)return;const D=p(C.clientX-O.left);a(C,d.value,D)},{barStart:E,barEnd:y,width:m,chartStart:x,chartEnd:o,chartSize:B}=s,h=t.ref(0),_=t.ref(0);return t.onMounted(()=>{t.watch([d,m,x,o,B.width],()=>{h.value=g(d.value[E.value]),_.value=g(d.value[y.value])},{deep:!0,immediate:!0})}),(C,O)=>(t.openBlock(),t.createElementBlock("div",{id:c.value.id,class:t.normalizeClass(["g-gantt-bar",c.value.class||""]),style:t.normalizeStyle({...c.value.style,position:"absolute",top:`${t.unref(w)*.1}px`,left:`${h.value}px`,width:`${_.value-h.value}px`,height:`${t.unref(w)*.8}px`,zIndex:i.value?3:2}),onMousedown:u,onClick:u,onDblclick:u,onMouseenter:u,onMouseleave:u,onContextmenu:u},[t.createElementVNode("div",ie,[t.renderSlot(C.$slots,"default",{bar:t.unref(d)},()=>[t.createElementVNode("div",null,t.toDisplayString(c.value.label||""),1)])]),c.value.hasHandles?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[se,le],64)):t.createCommentVNode("",!0)],46,oe))}}),Be="",Ct=t.defineComponent({__name:"GGanttRow",props:{label:{},bars:{},highlightOnHover:{type:Boolean}},emits:["drop"],setup(e,{emit:l}){const a=e,{rowHeight:s,colors:w}=R(),{highlightOnHover:d}=t.toRefs(a),g=t.ref(!1),p=t.computed(()=>({height:`${s.value}px`,background:(d==null?void 0:d.value)&&g.value?w.value.hoverHighlight:null})),{mapPositionToTime:f}=Q(),r=t.ref(null);t.provide(ft,r);const n=i=>{var b;const c=(b=r.value)==null?void 0:b.getBoundingClientRect();if(!c){console.error("Vue-Ganttastic: failed to find bar container element for row.");return}const v=i.clientX-c.left,k=f(v);l("drop",{e:i,datetime:k})};return(i,c)=>(t.openBlock(),t.createElementBlock("div",{class:"g-gantt-row",style:t.normalizeStyle(p.value),onDragover:c[0]||(c[0]=t.withModifiers(v=>g.value=!0,["prevent"])),onDragleave:c[1]||(c[1]=v=>g.value=!1),onDrop:c[2]||(c[2]=v=>n(v)),onMouseover:c[3]||(c[3]=v=>g.value=!0),onMouseleave:c[4]||(c[4]=v=>g.value=!1)},[t.createElementVNode("div",{class:"g-gantt-row-label",style:t.normalizeStyle({background:t.unref(w).primary,color:t.unref(w).text})},[t.renderSlot(i.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(i.label),1)])],4),t.createElementVNode("div",t.mergeProps({ref_key:"barContainer",ref:r,class:"g-gantt-row-bars-container"},i.$attrs),[t.createVNode(t.TransitionGroup,{name:"bar-transition",tag:"div"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.bars,v=>(t.openBlock(),t.createBlock(ce,{key:v.ganttBarConfig.id,bar:v},{default:t.withCtx(()=>[t.renderSlot(i.$slots,"bar-label",{bar:v})]),_:2},1032,["bar"]))),128))]),_:3})],16)],36))}}),ve="";function kt(){A.default.extend(St),A.default.extend(Tt),A.default.extend(Mt),A.default.extend(Lt)}const Ot={install(e,l){kt(),e.component("GGanttChart",vt),e.component("GGanttRow",Ct)}};T.GGanttChart=vt,T.GGanttRow=Ct,T.default=Ot,T.extendDayjs=kt,T.ganttastic=Ot,Object.defineProperties(T,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});function injectStyle(T,Y="top"){if(!T||typeof document>"u")return;const t=document.head,U=document.createElement("style");Y==="top"&&t.firstChild?t.insertBefore(U,t.firstChild):t.appendChild(U),U.appendChild(document.createTextNode(T))}injectStyle(`
.g-gantt-chart {
  position: relative;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  border-radius: 5px;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
}
.g-gantt-rows-container {
  position: relative;
}
`,"top");injectStyle(`
.g-gantt-row {
  width: 100%;
  transition: background 0.4s;
  position: relative;
}
.g-gantt-row > .g-gantt-row-bars-container {
  position: relative;
  border-top: 1px solid #eaeaea;
  width: 100%;
  border-bottom: 1px solid #eaeaea;
}
.g-gantt-row-label {
  position: absolute;
  top: 0;
  left: 0px;
  padding: 0px 8px;
  display: flex;
  align-items: center;
  height: 60%;
  min-height: 20px;
  font-size: 0.8em;
  font-weight: bold;
  border-bottom-right-radius: 6px;
  background: #f2f2f2;
  z-index: 3;
  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.6);
}
.bar-transition-leave-active,
.bar-transition-enter-active {
  transition: all 0.2s;
}
.bar-transition-enter-from,
.bar-transition-leave-to {
  transform: scale(0.8);
  opacity: 0;
}
`,"top");injectStyle(`
.g-timeaxis {
  position: sticky;
  top: 0;
  width: 100%;
  height: 8vh;
  min-height: 75px;
  background: white;
  z-index: 4;
  box-shadow: 0px 1px 3px 2px rgba(50, 50, 50, 0.5);
  display: flex;
  flex-direction: column;
}
.g-timeunits-container {
  display: flex;
  width: 100%;
  height: 50%;
}
.g-timeunit {
  height: 100%;
  font-size: 65%;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.g-upper-timeunit {
  display: flex;
  height: 100%;
  justify-content: center;
  align-items: center;
}
.g-timeaxis-hour-pin {
  width: 1px;
  height: 10px;
}
`,"top");injectStyle(`
.g-gantt-tooltip {
  position: fixed;
  background: black;
  color: white;
  z-index: 4;
  font-size: 0.85em;
  padding: 5px;
  border-radius: 3px;
  transition: opacity 0.2s;
  display: flex;
  align-items: center;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
}
.g-gantt-tooltip:before {
  content: "";
  position: absolute;
  top: 0;
  left: 10%;
  width: 0;
  height: 0;
  border: 10px solid transparent;
  border-bottom-color: black;
  border-top: 0;
  margin-left: -5px;
  margin-top: -5px;
}
.g-gantt-tooltip-color-dot {
  width: 8px;
  height: 8px;
  border-radius: 100%;
  margin-right: 4px;
}
.g-fade-enter-active,
.g-fade-leave-active {
  transition: opacity 0.3s ease;
}
.g-fade-enter-from,
.g-fade-leave-to {
  opacity: 0;
}
`,"top");injectStyle(`
.g-grid-container {
  position: absolute;
  top: 0;
  left: 0%;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: space-between;
}
.g-grid-line {
  width: 1px;
  height: 100%;
  border-left: 1px solid #eaeaea;
}
`,"top");injectStyle(`
.g-gantt-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  background: cadetblue;
  overflow: hidden;
}
.g-gantt-bar-label {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  padding: 0 14px 0 14px; /* 14px is the width of the handle */
  display: flex;
  justify-content: center;
  align-items: center;
}
.g-gantt-bar-label > * {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.g-gantt-bar-handle-left,
.g-gantt-bar-handle-right {
  position: absolute;
  width: 10px;
  height: 100%;
  background: white;
  opacity: 0.7;
  border-radius: 0px;
  cursor: ew-resize;
  top: 0;
}
.g-gantt-bar-handle-left {
  left: 0;
}
.g-gantt-bar-handle-right {
  right: 0;
}
.g-gantt-bar-label img {
  pointer-events: none;
}
`,"top");
