import{m as k,_ as d,r as x,o as p,c as u,e as b,b as e,n as M,k as f,l as C,V as F,d as R,q as D,p as P,j as A}from"./index-3caee4d8.js";import"./index-d7961689.js";import{H as c,a as I}from"./handsontable.full-31d5ba9c.js";import{u as _}from"./userStore-9431a957.js";import{P as g}from"./plotly.min-0072426f.js";k();function $(a,t,o,s,n,r,l){c.renderers.TextRenderer.apply(this,arguments),s===15&&(r==="High+"?(t.style.backgroundColor="#FF0000",t.style.color="black"):r==="High"?(t.style.backgroundColor="#FFC000",t.style.color="black"):r==="Low"&&(t.style.backgroundColor="#00B050",t.style.color="black"))}function T(a,t,o,s,n,r,l){if(c.renderers.TextRenderer.apply(this,arguments),s===16)switch(r){case"要対策":t.style.backgroundColor="#FF0000",t.style.color="black";break;case"対策検討":t.style.backgroundColor="#FFC000",t.style.color="black";break;case"適切":t.style.backgroundColor="#92D050",t.style.color="black";break;case"見直検討":t.style.backgroundColor="#00B050",t.style.color="black";break}}function N(a,t,o,s,n,r,l){switch(c.renderers.TextRenderer.apply(this,arguments),r){case"対策済":t.style.backgroundColor="#92D050",t.style.color="black";break;case"見直検討":t.style.backgroundColor="#00B050",t.style.color="black";break;case"保全タスク":t.style.backgroundColor="#FFFF00",t.style.color="black";break}const i=16,h=a.getDataAtCell(o,i),y=15,m=a.getDataAtCell(o,y);r==="対策済"||r==="見直検討"||r==="保全タスク"||(m==="High+"||h==="要対策"?(t.style.backgroundColor="#FF0000",t.style.color="black"):(m==="High"||h==="対策検討")&&(t.style.backgroundColor="#FFC000",t.style.color="black"))}function H(a,t,o,s,n,r,l){c.renderers.TextRenderer.apply(this,arguments),r==="遅延"&&(t.style.backgroundColor="#FFFF00",t.style.color="black")}function S(a,t,o,s,n,r,l){c.renderers.TextRenderer.apply(this,arguments);const i=5,h=6,y=a.getDataAtCell(o,i),m=a.getDataAtCell(o,h),v=Math.max(y,m);t.innerHTML=v===0?"":v}const E=M({data(){return{hotSettings:{data:[["","PlantA","モーターA","N401/A plant__","4","10","6","10","4","今年","2022-10-02","3","2019-11-01","0","","High+","","対策済","A plant/変換器室 変換器盤1-3パワーサプライ交換","10000","3","2025","","Standard","","","","",""],["","PlantA","モーターA","N401/A plant__/OX2_","3","10","6","10","4","","","4","2018-08-10","","","High","対策検討","","","750000","3","","遅延","","","","","",""],["","PlantB","Attach系機械設備","N401/A plant__/OX2_/A","3","10","6","10","今年","2","2022-05-20","0","","","","","注意","","A plant/Di槽撹拌機交換（A）","5000","","","","","","","","",""],["","PlantC","回収温水熱交","N401/A plant__/OX2_/A/5E-09","3","10","60","10","4","","","","","","","Low","見直検討","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],nestedHeaders:[["","","","",{label:"Impact",colspan:5},{label:"Probability of failure",colspan:6},{label:"Critical equipment Level",colspan:3},"","","","","",{label:"Spare parts",colspan:2},{label:"Status of measures",colspan:4},{label:"Order",colspan:2}],["CeListNo","Plant","Equipment","Machine","Level set <br>value","Construction <br>period","Parts <br>delivery date","MTTR","Possibility of <br>production Lv","Count <br>of PM02","Latest <br>PM02","Count <br>of PM03","Latest <br>PM03","Count <br>of PM04","Latest <br>PM04","Impact for <br>production","Probability <br>of failure","Assessment","Typical Task","Labor <br>Cost(PM02)","Period","Next <br>event year","situation","BomCode","Stock","RCA or <br>Replace(hard)","Spear parts or <br>Alternative(soft)","Covered <br>from task","Two <br>ways"]],columns:[{data:"ceListNo",type:"text",readOnly:!0},{data:"plant",type:"text"},{data:"equipment",type:"text"},{data:"machineName",type:"text"},{data:"levelSetValue",type:"numeric"},{data:"typicalConstPeriod",type:"numeric"},{data:"maxPartsDeliveryTimeInBom",type:"numeric"},{data:"mttr",type:"numeric",renderer:S},{data:"probabilityOfFailure",type:"numeric",className:"htRight",readOnly:!0},{data:"countOfPM02",width:100,className:"htRight",type:"numeric"},{data:"latestPM02",width:100,className:"htRight",type:"date",dateFormat:"YYYY-MM-DD",correctFormat:!1},{data:"countOfPM03",width:100,className:"htRight",type:"numeric"},{data:"latestPM03",width:100,className:"htRight",type:"date",dateFormat:"YYYY-MM-DD",correctFormat:!1},{data:"countOfPM04",width:100,className:"htRight",type:"numeric"},{data:"latestPM04",width:100,className:"htRight",type:"date",dateFormat:"YYYY-MM-DD",correctFormat:!1},{data:"impactForProduction",renderer:$,width:100,className:"htCenter",readOnly:!0},{data:"probabilityOfFailure",renderer:T,width:100,className:"htCenter",readOnly:!0},{data:"assessment",renderer:N,readOnly:!0,width:100,className:"htCenter"},{data:"typicalTaskName",type:"text"},{data:"typicalTaskCost",type:"numeric"},{data:"typicalConstPeriod",type:"numeric"},{data:"typicalNextEventDate",className:"htRight",type:"date",dateFormat:"YYYY-MM-DD",correctFormat:!1,readOnly:!0},{data:"typicalSituation",className:"htCenter",renderer:H,readOnly:!0},{data:"bomCode",className:"htRight",type:"dropdown",source:["Standard","Inventory","consumables"]},{data:"bomStock",type:"dropdown",source:["有","無"],className:"htCenter"},{data:"rcaOrReplace",width:100,className:"htCenter",type:"checkbox"},{data:"sparePartsOrAlternative",width:100,className:"htCenter",type:"checkbox"},{data:"coveredFromTask",width:100,className:"htCenter",type:"checkbox"},{data:"twoways",width:100,className:"htCenter",type:"checkbox"}],width:"100%",height:"auto",stretchH:"all",contextMenu:!0,autoWrapRow:!0,autoWrapCol:!0,fixedColumnsStart:2,fixedRowsTop:2,manualColumnFreeze:!0,manualColumnResize:!0,manualRowResize:!0,filters:!0,dropdownMenu:!0,comments:!0,fillHandle:{autoInsertRow:!0},licenseKey:"non-commercial-and-evaluation"}}},created(){this.getDataAxios()},methods:{initHandsontable(){const a=this.$el;this.hot=new c(a,{afterChange:(t,o)=>{if(o!=="loadData"){const s=this.hot.getData();this.updateData(s)}}})},getDataAxios(){const t=_().companyCode;if(!t){console.error("Error: No company code found for the user.");return}const o=`http://127.0.0.1:8000/api/junctionTable/masterDataTableByCompany/?format=json&companyCode=${t}`;f.get(o,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(s=>{const n=s.data.flatMap(i=>i.MasterDataTable);console.log("Fetched masterDataTable:",n);const r=Array.from({length:10},()=>({})),l=n.concat(r);this.$refs.hotTableComponent.hotInstance.loadData(l)}).catch(s=>{console.error("Error fetching data:",s)})},updateData(a){const o=_().companyCode,s=`http://127.0.0.1:8000/api/junctionTable/masterDataTableByCompany/?format=json&companyCode=${o}`,n={companyCode:o,masterDataTable:a};f.post(s,n).then(r=>console.log("Data successfully updated:",r)).catch(r=>console.error("Error updating data:",r))},sendData(){const a=this.$refs.hotTableComponent.hotInstance.getSourceData();this.updateData(a)}},components:{HotTable:I}}),L=E,O={id:"CeList"},V=e("br",null,null,-1);function q(a,t,o,s,n,r){const l=x("hot-table");return p(),u("div",O,[b(l,{ref:"hotTableComponent",settings:a.hotSettings},null,8,["settings"]),V,e("button",{onClick:t[0]||(t[0]=(...i)=>a.updateData&&a.updateData(...i)),class:"controls"},"Update Data")])}const de=d(L,[["render",q]]),Y={data(){return{values:{},error:null}},mounted(){f.get("http://127.0.0.1:8000/api/v1/ceList/").then(a=>{const t=a.data.map(r=>r.assessment);console.log("typeArray:",t),this.values=t.reduce((r,l)=>(r[l]=(r[l]||0)+1,r),{});let o={type:"pie",values:Object.values(this.values),labels:Object.keys(this.values),textinfo:"label+percent",insidetextorientation:"radial"};const s={height:400,width:400,automargin:!0},n={responsive:!0};document.getElementById("AssessmentRate")?(console.log("Before plotting"),g.newPlot("AssessmentRate",[o],s,n),console.log("After plotting")):console.error("Element with id 'AssessmentRate' not found.")}).catch(a=>{console.error("Error fetching data:",a)})}},B=e("div",{id:"AssessmentRate"},null,-1);function j(a,t,o,s,n,r){return p(),u("div",null,[b(D,null,{default:C(()=>[b(F,null,{default:C(()=>[R("Assessment rate")]),_:1}),B]),_:1})])}const pe=d(Y,[["render",j]]);const z={mounted(){try{{const o=this.$el.querySelector("#rMatrix tbody td[s='3']").cellIndex,s=this.$el.querySelector("#rMatrix tbody tr[lh='3']").cells[o];s.style.border="3px solid",s.style.boxShadow="-5px 5px 20px 20px rgba(14, 1, 1, 0.17), -15px -11px 20px 5px rgba(14, 14, 14, 0.22)",s.style.borderStyle="dashed"}}catch(o){console.error(o)}}},w=a=>(P("data-v-271621f1"),a=a(),A(),a),K={class:"table table-bordered table-responsive",id:"rMatrix"},U=w(()=>e("thead",null,[e("tr",null,[e("th"),e("th",{colspan:"2"},"STATUS OF EVENT"),e("th",{colspan:"5"},"RISK CLASS")])],-1)),W=w(()=>e("tbody",null,[e("tr",{lh:"5"},[e("td",{rowspan:"5",class:"r-header",style:{"text-align":"center"}},"LIKELIHOOD OF EVENT HAPPENING"),e("td",{style:{"min-width":"50px"}},"5"),e("td",null,"It is or has already happened"),e("td",{class:"M"},"M"),e("td",{class:"H"},"H"),e("td",{class:"H"},"H"),e("td",{class:"VH"},"VH"),e("td",{class:"VH"},"VH")]),e("tr",{lh:"4"},[e("td",null,"4"),e("td",null,"It will probably happen"),e("td",{class:"M"},"M"),e("td",{class:"M"},"M"),e("td",{class:"H"},"H"),e("td",{class:"VH"},"VH"),e("td",{class:"VH"},"VH")]),e("tr",{lh:"3"},[e("td",null,"3"),e("td",null,"It could possibly Happen"),e("td",{class:"L"},"L"),e("td",{class:"M"},"M"),e("td",{class:"M"},"M"),e("td",{class:"H"},"H"),e("td",{class:"H"},"H")]),e("tr",{lh:"2"},[e("td",null,"2"),e("td",null,"It is to Happen"),e("td",{class:"L"},"L"),e("td",{class:"L"},"L"),e("td",{class:"M"},"M"),e("td",{class:"M"},"M"),e("td",{class:"H"},"H")]),e("tr",{lh:"1"},[e("td",null,"1"),e("td",null,"It is unlikely to Happen"),e("td",{class:"L"},"L"),e("td",{class:"L"},"L"),e("td",{class:"L"},"L"),e("td",{class:"M"},"M"),e("td",{class:"M"},"M")]),e("tr",null,[e("td",{rowspan:"3",class:"r-header"},"LIKELY OUTCOME OF EVENT"),e("td",{colspan:"2",class:"r-header"},"SAFETY"),e("td",null,"Near Miss"),e("td",null,"Minor Inquiry"),e("td",null,"Lost Time Accident"),e("td",null,"Major Inquiry"),e("td",null,"Fatality")]),e("tr",null,[e("td",{colspan:"2",class:"r-header"},"ENVIRONMENT"),e("td",null,"Potential Event"),e("td",null,"Minor Event"),e("td",null,"Important Event"),e("td",null,"Significant Event"),e("td",null,"Major Event")]),e("tr",null,[e("td",{colspan:"2",class:"r-header"},"COST"),e("td",null,"< 1k $ "),e("td",null,"< 10k $ "),e("td",null,"< 100k $ "),e("td",null,"< 300k $ "),e("td",null,"> 500k $")]),e("tr",null,[e("td"),e("td",{colspan:"2",class:"r-header"},"SEVERITY"),e("td",{s:"1"},"1"),e("td",{s:"2"},"2"),e("td",{s:"3"},"3"),e("td",{s:"4"},"4"),e("td",{s:"5"},"5")])],-1)),X=[U,W];function G(a,t,o,s,n,r){return p(),u("table",K,X)}const ue=d(z,[["render",G],["__scopeId","data-v-271621f1"]]),J={mounted(){let a=[["・Recovery possible by operator・Replacement device or easy recovery possible・Equipment is divided into two lines, making recovery easy.Spare parts are on hand and restoration is easily possible with WI"],["・Recovery within 1 day・Recovery by operator is not possible・Restoration by knowledgeable and professional contractors.Spare parts and replacement machines available・Parts delivery time for restoration is within 3 days"],["・Recovery within 1 to 3 days・Recovery by operator is not possible・Restoration by knowledgeable and professional contractors.No spare parts or replacement equipment available・The parts delivery time required for restoration is between 1 and 3 days."],["・Recovery within 3 to 14 days・Manufacturing by changing manufacturing conditions such as single-lung operation・Irregular operations by operators occur after provisional recovery・Special parts are required and the parts delivery time is 3 days or more."],["・Due to severe equipment damage, recovery with replacement equipment is not possible.・Individual response is required after coordinating with each department"]],t="grey",o="lightgrey",s="white",n={type:"table",columnwidth:[400,400,400,400,400],header:{values:[["<b>1 - Operator recovery possible</b>"],["<b>2 - Spare parts and replacement machines are available, allowing for quick recovery.</b>"],["<b>3 - Recovery that requires specialized contractors and involves irregularities</b>"],["<b>4 - Temporary recovery in situations where production schedule or quality is affected</b>"],["<b>5 - Recovery not possible</b>"]],align:"center",line:{width:1,color:"black"},fill:{color:t},font:{family:"Arial",size:12,color:"white"}},cells:{values:a,align:["center"],fill:{color:[s,o,s,o,s]},font:{family:"Arial",size:12,color:["black"]}}};const r={title:"Definition of impact for production",height:500,width:780,margin:{t:40,r:10,b:0,l:10},displayModeBar:!1,displaylogo:!1},l={responsive:!0};g.newPlot("LvDescriptionImpact",[n],r,l)}},Q=e("div",{id:"LvDescriptionImpact",style:{width:"800px"}},null,-1),Z=[Q];function ee(a,t,o,s,n,r){return p(),u("div",null,Z)}const he=d(J,[["render",ee]]),te={mounted(){let a=[["・No failures have occurred in the past 5 years.・Equipment operating rate is low, and the possibility of failure occurring in the future is low."],["・Failures have occurred less than twice in the past five years.・Preventive maintenance has been performed in the past five years.・Countermeasures for past problems have been implemented through RCA, etc., and are showing sufficient effectiveness.Managed by preventive maintenance tasks, with regular maintenance observations and actions taken."],["・Failures have occurred 2 or more times but less than 3 times in the past 5 years.・It is managed by preventive maintenance tasks, and early abnormalities can be detected.・Countermeasures for past problems have been implemented through RCA, etc., and are showing sufficient effectiveness.・PM has not been implemented for a long time."],["・Failures have occurred 2 or more times but less than 3 times in the past 5 years.Although managed by preventive maintenance tasks, a certain number of failures occur.Countermeasures for past problems caused by RCA, etc. have not been implemented, or their effects have not been sufficiently effective.・The cause of the trouble is clear and its occurrence can be predicted."],["- Failures have occurred three or more times during repairs over the past five years.Not managed by preventive maintenance tasks, and initial abnormalities are not noticed.Countermeasures for past problems have not been implemented or their effects have not been sufficiently effective.The cause of the problem is not clear."]],t="lightgrey",o="white",s={type:"table",columnwidth:[400,400,400,400,400],header:{values:[["<b>1 - Extremely rare</b>"],["<b>2 - Rare</b>"],["<b>3 - Occasionally</b>"],["<b>4 - Often</b>"],["<b>5 - Frequently</b>"]],align:"center",line:{width:1,color:"black"},fill:{color:["#00B050","#92D050","#FFFF00","#FFC000","#FF0000"]},font:{family:"Arial",size:12,color:"black"}},cells:{values:a,align:["center"],fill:{color:[o,t,o,t,o]},font:{family:"Arial",size:12,color:["black"]}}};const n={title:"Definition of probability of failure",height:500,width:780,margin:{t:40,r:10,b:0,l:10},displayModeBar:!1,displaylogo:!1},r={responsive:!0};g.newPlot("LvDescriptionFailure",[s],n,r)}},ae=e("div",{id:"LvDescriptionFailure",style:{width:"800px"}},null,-1),re=[ae];function oe(a,t,o,s,n,r){return p(),u("div",null,re)}const me=d(te,[["render",oe]]);export{pe as A,de as C,he as I,me as P,ue as R};
