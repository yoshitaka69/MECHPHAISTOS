import{m as j,_ as v,r as u,o as _,c as N,e as h,b as t,n as B,k as y,l as g,a as E}from"./index-3caee4d8.js";import"./index-d7961689.js";import{a as H,H as L}from"./handsontable.full-31d5ba9c.js";import{u as x}from"./userStore-9431a957.js";j();function C(o,a,c,s,r,n,e){L.renderers.TextRenderer.apply(this,arguments),n==="order"&&(a.style.backgroundColor="#FF0000",a.style.color="black")}const I=B({data(){return{hotSettings:{data:[["",1,"Motor","Standard","RX-78-5.7","12345-98","Change motor",9e5,1,"pieces","warehouse1","8","","","when we change No.1 agitator, we have to change this motor too"],["",2,"Agitator","Inventory","ag89-78-5.7","1233333-9","Replace agitator",18e4,4,"pieces","warehouse2","14","","","This agitator is bad actor,we keep this agitator every time"],["",3,"Pump","Standard","zew99-0045","135455333-9","Exchange pump",55e4,2,"pieces","plantA","60","","","This pump is needed exchange by operator"],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""]],colHeaders:["parts No","Image","BOM <br>Code.","Parts Name","Category","Model","Serial Number","Task Code","Price","Number <br>of ~","Unit","Location","Delivery <br>Time","Alert <br>order","Order <br>situation","classification","inventoryTurnover","Description"],columns:[{type:"numeric"},{},{type:"numeric"},{type:"text",className:"htCenter"},{className:"htRight",type:"dropdown",source:["Standard","Inventory","consumables"]},{type:"text"},{type:"text",className:"htRight"},{type:"text",className:"htCenter"},{type:"numeric",className:"htRight"},{width:60,className:"htRight",type:"numeric"},{width:60,type:"numeric",className:"htRight"},{className:"htRight",type:"text",className:"htRight"},{width:60,className:"htRight",type:"numeric"},{width:100,className:"htCenter",type:"text",renderer:C},{width:100,className:"htCenter",type:"checkbox"},{width:100,className:"htCenter",type:"text"},{width:100,className:"htCenter",type:"text"},{className:"htCenter",type:"text"}],width:"100%",height:"auto",stretchH:"all",contextMenu:!0,autoWrapRow:!0,autoWrapCol:!0,fixedColumnsStart:2,fixedRowsTop:2,manualColumnFreeze:!0,manualColumnResize:!0,manualRowResize:!0,filters:!0,dropdownMenu:!0,comments:!0,fillHandle:{autoInsertRow:!0},licenseKey:"non-commercial-and-evaluation"}}},created(){this.getDataAxios()},methods:{getDataAxios(){const a=x().companyCode;if(!a){console.error("Error: No company code found for the user.");return}const c=`http://127.0.0.1:8000/api/spareParts/sparePartsByCompany/?format=json&companyCode=${a}`;y.get(c,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(s=>{const r=s.data,n=["partsNo","image","bomCode","partsName","category","partsModel","serialNumber","taskCode","partsCost","numberOf","unit","location","partsDeliveryTime","orderAlert","orderSituation","classification","inventoryTurnover","partsDescription"],e=r.flatMap(f=>f.sparePartsList.flatMap(p=>{const m={};return n.forEach(l=>{m[l]=l==="partsCost"||l==="numberOf"?parseFloat(p[l])||0:p[l]}),m})),i=[{data:"partsNo",type:"text",readOnly:!0},{data:"image"},{data:"bomCode"},{data:"partsName"},{data:"category"},{data:"partsModel"},{data:"serialNumber"},{data:"taskCode"},{data:"partsCost"},{data:"numberOf"},{data:"unit"},{data:"location"},{data:"partsDeliveryTime"},{data:"orderAlert",renderer:C,readOnly:!0},{data:"orderSituation",readOnly:!0},{data:"classification"},{data:"inventoryTurnover",readOnly:!0},{data:"partsDescription"}];console.log("Table Data:",e);const d=Array.from({length:10},()=>({})),b=e.concat(d);this.$refs.hotTableComponent.hotInstance.updateSettings({data:b,columns:i})}).catch(s=>{console.error("Error fetching data:",s)})},updateData:function(){const a=x().companyCode;if(!a){console.error("Error: No company code found for the user.");return}const c=this.$refs.hotTableComponent.hotInstance.getData();let s=[];c.forEach(e=>{let i=e[0],d=e[1],b=e[2],f=e[3],p=e[4],m=e[5],l=e[6],S=e[7],T=e[8],D=e[9],w=e[10],P=e[11],R=e[12],O=e[13],$=e[14],M=e[15],k=e[16],A=e[17];s.push({companyCode:a,partsNo:i,image:d,bomCode:b,partsName:f,category:p,partsModel:m,serialNumber:l,taskCode:S,partsCost:T,numberOf:D,unit:w,location:P,partsDeliveryTime:R,orderAlert:O,orderSituation:$,classification:M,inventoryTurnover:k,partsDescription:A})});let r={companyCode:a,sparePartsList:s};console.log("postData",r);const n=`http://127.0.0.1:8000/api/spareParts/sparePartsByCompany/?format=json&companyCode=${a}`;y.post(n,r).then(e=>{console.log("Data posted successfully",e.data)}).catch(e=>{console.error("Error in posting data",e)})}},components:{HotTable:H}}),F=I,U={id:"SparePartsList"},V=t("br",null,null,-1);function z(o,a,c,s,r,n){const e=u("hot-table");return _(),N("div",U,[h(e,{ref:"hotTableComponent",settings:o.hotSettings},null,8,["settings"]),V,t("button",{onClick:a[0]||(a[0]=(...i)=>o.updateData&&o.updateData(...i)),class:"controls"},"Update Data")])}const W=v(F,[["render",z]]),K={components:{BOM:W}},X={class:"base-content"},q=E('<section class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1>Spare Parts List</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">How to use detail</a></li><li class="breadcrumb-item"><a href="#">Spare parts list</a></li><li class="breadcrumb-item active">MECHPHAISTOS</li></ol></div></div></div></section>',1),G={class:"content"},J={class:"card card-solid"},Q={class:"line-height-3 m-0"},Y=t("div",{class:"row"},[t("div",{class:"col-12 lg:col-6 xl:col-4"},[t("div",{class:"card mb-0"},[t("div",{class:"flex justify-content-between mb-3",style:{height:"20px"}},[t("div",null,[t("span",{class:"block text-500 font-medium mb-3"},"Order List"),t("div",{class:"text-900 font-medium text-xl"},"$2.100")]),t("div",{class:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-map-marker text-orange-500 text-xl"})])])])]),t("div",{class:"col-12 lg:col-6 xl:col-4"},[t("div",{class:"card mb-0"},[t("div",{class:"flex justify-content-between mb-3",style:{height:"20px"}},[t("div",null,[t("span",{class:"block text-500 font-medium mb-3"},"Order Alert"),t("div",{class:"text-900 font-medium text-xl"},"28441")]),t("div",{class:"flex align-items-center justify-content-center bg-cyan-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-inbox text-cyan-500 text-xl"})])])])]),t("div",{class:"col-12 lg:col-6 xl:col-4"},[t("div",{class:"card mb-0"},[t("div",{class:"flex justify-content-between mb-3",style:{height:"20px"}},[t("div",null,[t("span",{class:"block text-500 font-medium mb-3"},"Spare Parts Total Cost"),t("div",{class:"text-900 font-medium text-xl"},"152 Unread")]),t("div",{class:"flex align-items-center justify-content-center bg-purple-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-comment text-purple-500 text-xl"})])])])]),t("br"),t("br")],-1);function Z(o,a,c,s,r,n){const e=u("BOM"),i=u("TabPanel"),d=u("TabView");return _(),N("div",X,[q,t("section",G,[t("div",J,[h(d,null,{default:g(()=>[h(i,{header:"Spare Parts List"},{default:g(()=>[t("p",Q,[Y,h(e)])]),_:1})]),_:1})])])])}const ot=v(K,[["render",Z]]);export{ot as default};
