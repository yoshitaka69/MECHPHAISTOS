import{_ as I,o as d,c as p,b as e,s as w,u as T,r as v,x as V,l as b,t as h,f as j,v as F,e as l,y as O,F as D,h as S,i as U,T as P,k as M,n as z,z as E,A as H,B as Y,C as K,a as G,V as q,d as x,q as W,D as J}from"./index-3caee4d8.js";import{P as B}from"./plotly.min-0072426f.js";import{u as $}from"./userStore-9431a957.js";import{a as Q,b as X,S as Z}from"./Safety_correlation_diagram-2f99f3ad.js";const ee=()=>i=>!i||!i.match(/\S/g)?"入力してください。":"",te=i=>o=>o.length<i?`${i}文字以上で入力してください。`:"",oe={mounted(){let i=[["<b>A</b>","<b>B</b>","<b>C</b>","<b>D</b>","<b>E</b>"],["Death","Visceral disorder, Lv3 Burn, Amputation","Eye injury, Lv2 Burn, fracture","First aid that does not interfere with work, Lv1 Burn","Minor scratches not applicable"],["Explosion, Destruction of critical assets","Limited destruction or fire that takes more than a week to repair","Minor damage within 1 week to repair","Minor damage that can be repaired within 1 day","Minor damage not applicable to the above"],["Massive irreversible damage","1 year of ecological damage","Short-term effects around the leak location","There is no effect on biological systems, but coloring and odor are generated.","Minor environmental damage that does not fall under the above categories"],["International media coverage","Local media coverage","No media coverage. However, it is necessary to report to the government agency.","No media coverage. However, there is no need to report to government agencies.","Not applicable to the above"],["Something needs to be done urgently","Some kind of soft or hard response is required within a few days.","In addition to considering hard measures.","Consider measures such as reviewing methods and rules (soft).","No measures needed"]],o="grey",u="lightgrey",s="white",n={type:"table",columnwidth:[150,400,400,400,400,400],header:{values:[["<b>Level</b>"],["<b>Injured Lv</b>"],["<b>Equipment Damage Lv</b>"],["<b>Affect Of Enviroment</b>"],["<b>NewsCoverage</b>"],["<b>Measures</b>"]],align:"center",line:{width:1,color:"black"},fill:{color:o},font:{family:"Arial",size:12,color:"white"}},cells:{values:i,align:["center","left"],fill:{color:[s,u,s,u,s,u]},font:{family:"Arial",size:12,color:["black"]}}};const a={height:550,width:780,margin:{t:40,r:0,b:0,l:10},displayModeBar:!1,displaylogo:!1},_={responsive:!0};B.newPlot("LvDescription",[n],a,_)}},se=e("div",{id:"LvDescription"},null,-1),ae=[se];function ne(i,o,u,s,n,a){return d(),p("div",null,ae)}const re=I(oe,[["render",ne]]);const le={props:{show:Boolean},components:{Level_description:re},setup(){const i=$(),o=w("001-testChemical-000001");(async()=>{try{const r=$().companyCode,A=(await M.get(`http://127.0.0.1:8000/api/nearMiss/nearMissByCompany/?companyCode=${r}`)).data.find(L=>L.companyCode===r);if(A&&A.nearMissList&&A.nearMissList.length>0){const L=A.nearMissList.map(N=>N.nearMissNo).sort().pop();if(L){const N=L.match(/(\d+)-(\w+)-(\d+)$/);if(N){const k=(parseInt(N[3],10)+1).toString().padStart(N[3].length,"0");return`${N[1]}-${N[2]}-${k}`}}}return o.value}catch(t){throw console.error("Error getting last nearMissNo:",t),t}})().then(t=>o.value=t);const s=()=>{const t={A:10,B:8,C:3,D:2,E:1};console.log("FormState values:",a.InjuredLv,a.EquipmentDamageLv,a.AffectOfEnviroment,a.NewsCoverage);const r=["InjuredLv","EquipmentDamageLv","AffectOfEnviroment","NewsCoverage"].reduce((m,C)=>(console.log(`Processing ${C}: ${a[C]}, mapped value: ${t[a[C]]}`),a[C],m+(t[a[C]]||0)),0);return console.log("Total score:",r),r>=11?"A":r>=10?"B":r>=9?"C":r>=5?"D":"E"},n=T({NearMissNo:"",Date:"",Name:"",Department:"",Where:"",TypeOfAccIdent:"",Factor:"",InjuredLv:"",EquipmentDamageLv:"",AffectOfEnviroment:"",NewsCoverage:"",Description:""}),a=T({...n}),_=()=>{Object.assign(a,n)},f=T({Date:[],Name:[],Department:[],Where:[],TypeOfAccIdent:[],Factor:[],InjuredLv:[],EquipmentDamageLv:[],AffectOfEnviroment:[],NewsCoverage:[],Description:[]}),g={Date:[],Name:[ee()],Department:[te(5)],Where:[],TypeOfAccIdent:[],Factor:[],InjuredLv:[],EquipmentDamageLv:[],AffectOfEnviroment:[],NewsCoverage:[],Description:[]};return{calculateCategory:s,formState:a,errorMessagesState:f,validatorsState:g,onInputForm:(t,r)=>{a[t]=r,f[t]=g[t].map(m=>m(r)).filter(m=>m!=="")},submitForm:async()=>{try{const t={companyCode:i.companyCode,nearMissList:[{nearMissNo:o.value,userName:{userName:a.Name},department:a.Department,dateOfOccurrence:a.Date,placeOfOccurrence:a.Where,typeOfAccident:a.TypeOfAccIdent,factor:a.Factor,injuredLv:a.InjuredLv,equipmentDamageLv:a.EquipmentDamageLv,affectOfEnviroment:a.AffectOfEnviroment,newsCoverage:a.NewsCoverage,measures:s(),description:a.Description}]};console.log("Submitting data:",t);const r=await M.post("http://127.0.0.1:8000/api/nearMiss/nearMissByCompany/",t);console.log(r.data),_()}catch(t){console.error("Error submitting form:",t.response?t.response.data:t.message)}},lastNearMissNo:o}},data(){return{accidentTypes:["fall down","fall/slip","collision","accidental fall","collapse","hit by something","got caught up in","cut/Rubbing","treading on something sharp","drown","contact with hot or cold objects","contact with organic matter","electric shock","explosion","rupture","conflagration","traffic accident","impossible movement","protective equipment violation","others"],factors:["Person","Rule","Equipment","Methods","Others"],injuredLevels:["A","B","C","D","E"],equipmentDamageLevels:["A","B","C","D","E"],affectOfEnviromentLevels:["A","B","C","D","E"],newsCoverageLevels:["A","B","C","D","E"],formState:{TypeOfAccIdent:"",Factor:"",InjuredLv:"",EquipmentDamageLv:"",AffectOfEnviroment:"",NewsCoverage:""}}}},ie={key:0,class:"modal-mask"},ce={class:"modal-container"},de={class:"IdGroup flex align-items-center gap-3 mb-5"},ue={class:"DateGroup flex align-items-center gap-3 mb-5"},me=e("label",{class:"DateGroup_label",for:"Date"},"Date :",-1),pe={class:"flex gap-3"},fe={class:"NameGroup flex align-items-center gap-3 mb-5"},_e=e("label",{class:"NameGroup__label",for:"Name"},"Name :",-1),ve={class:"NameGroup__errorMessages"},he={class:"DepartmentGroup flex align-items-center gap-3 mb-5"},ge=e("label",{class:"DepartmentGroup__label",for:"Department"},"Department :",-1),ye={class:"DepartmentGroup__errorMessages"},be={class:"WhereGroup flex align-items-center gap-3 mb-5"},xe=e("label",{class:"WhereGroup__label",for:"Where"},"Where? :",-1),we={class:"WhereGroup__errorMessages"},Ce={class:"TypeOfAccIdentGroup flex flex-wrap gap-3 align-items-center"},De=e("label",{class:"TypeOfAccIdentGroup__label",for:"TypeOfAccIdent"},"Type of AccIdent :",-1),Ne={id:"TypeOfAccIdent",class:"flex flex-wrap gap-3 mb-5 align-items-center"},Se={class:"ui radio checkbox d-flex gap-1 align-items-center"},Me={class:"level-description-table",style:{display:"flex","justify-content":"space-between"}},$e={style:{"margin-right":"1500px"}},Ie={class:"FactorGroup flex flex-wrap gap-3"},Ae=e("label",null,"Factor :",-1),Le={id:"Factor",class:"flex flex-wrap gap-3 mb-2"},Ee={class:"ui radio checkbox d-flex gap-1 align-items-center"},Oe={class:"InjuredLvGroup flex flex-wrap gap-3"},ke=e("label",null,"Injured Lv :",-1),Te={id:"InjuredLv",class:"flex flex-wrap gap-3"},je={class:"ui radio checkbox d-flex gap-1 align-items-center"},Be={class:"EquipmentDamageLvGroup flex flex-wrap gap-3"},Ve=e("label",null,"Equipment Damage Lv :",-1),Fe={id:"EquipmentDamageLv",class:"flex flex-wrap gap-3 mb-2"},Ge={class:"ui radio checkbox d-flex gap-1 align-items-center"},qe={class:"AffectOfEnviromentGroup flex flex-wrap gap-3"},We=e("label",null,"Affect Of Enviroment :",-1),Re={id:"AffectOfEnviroment",class:"flex flex-wrap gap-3 mb-2"},Ue={class:"ui radio checkbox d-flex gap-1 align-items-center"},Pe={class:"NewsCoverageGroup flex flex-wrap gap-3"},ze=e("label",null,"News Coverage :",-1),He={id:"NewsCoverage",class:"flex flex-wrap gap-3 mb-2"},Ye={class:"ui radio checkbox d-flex gap-1 align-items-center"},Ke={class:"Measures flex flex-wrap gap-3 mb-5"},Je={style:{display:"flex","justify-content":"space-between",margin:"0 30px"}},Qe={class:"DiscriptionGroup text-center mb-6"},Xe={class:"flex align-items-start"},Ze=e("label",{for:"Discription-input",class:"mr-2"},"Description :",-1),et=e("br",null,null,-1),tt={class:"flex justify-content-end gap-2"};function ot(i,o,u,s,n,a){const _=v("InputText"),f=v("RadioButton"),g=v("Level_description"),y=v("Textarea"),c=v("Button");return d(),V(P,{name:"modal"},{default:b(()=>[u.show?(d(),p("div",ie,[e("div",ce,[e("div",de,[e("label",null,"NearMiss No: "+h(s.lastNearMissNo),1)]),e("div",ue,[me,j(e("input",{type:"Date","onUpdate:modelValue":o[0]||(o[0]=t=>n.formState.Date=t),id:"Date"},null,512),[[F,n.formState.Date]])]),e("div",pe,[e("div",fe,[_e,l(_,{class:O(["NameGroup__input",{"NameGroup__input-error":s.errorMessagesState.Name.length}]),type:"text",id:"Name",placeholder:"write your Name",value:n.formState.Name,onInput:o[1]||(o[1]=t=>s.onInputForm("Name",t.target.value))},null,8,["class","value"]),e("ul",ve,[(d(!0),p(D,null,S(s.errorMessagesState.Name,t=>(d(),p("li",{key:t},h(t),1))),128))])]),e("div",he,[ge,l(_,{class:O(["DepartmentGroup__input",{"DepartmentGroup__input-error":s.errorMessagesState.Department.length}]),type:"text",id:"Department",placeholder:"write your department",value:n.formState.Department,onInput:o[2]||(o[2]=t=>s.onInputForm("Department",t.target.value))},null,8,["class","value"]),e("ul",ye,[(d(!0),p(D,null,S(s.errorMessagesState.Department,t=>(d(),p("li",{key:t},h(t),1))),128))])]),e("div",be,[xe,l(_,{class:O(["WhereGroup__input",{"WhereGroup__input-error":s.errorMessagesState.Where.length}]),type:"text",id:"Where",placeholder:"white place",value:n.formState.Where,onInput:o[3]||(o[3]=t=>s.onInputForm("Where",t.target.value))},null,8,["class","value"]),e("ul",we,[(d(!0),p(D,null,S(s.errorMessagesState.Where,t=>(d(),p("li",{key:t},h(t),1))),128))])])]),e("div",Ce,[De,e("div",Ne,[(d(!0),p(D,null,S(n.accidentTypes,(t,r)=>(d(),p("div",{key:r,class:"field"},[e("div",Se,[l(f,{name:t,value:t,modelValue:n.formState.TypeOfAccIdent,"onUpdate:modelValue":o[4]||(o[4]=m=>n.formState.TypeOfAccIdent=m),tabindex:r},null,8,["name","value","modelValue","tabindex"]),e("label",null,h(t),1)])]))),128))])]),e("table",Me,[e("tr",null,[e("td",$e,[e("div",Ie,[Ae,e("div",Le,[(d(!0),p(D,null,S(n.factors,(t,r)=>(d(),p("div",{key:r,class:"field"},[e("div",Ee,[l(f,{name:t,value:t,modelValue:n.formState.Factor,"onUpdate:modelValue":o[5]||(o[5]=m=>n.formState.Factor=m),tabindex:r},null,8,["name","value","modelValue","tabindex"]),e("label",null,h(t),1)])]))),128))])]),e("div",Oe,[ke,e("div",Te,[(d(!0),p(D,null,S(n.injuredLevels,(t,r)=>(d(),p("div",{key:r,class:"field"},[e("div",je,[l(f,{name:t,value:t,modelValue:n.formState.InjuredLv,"onUpdate:modelValue":o[6]||(o[6]=m=>n.formState.InjuredLv=m),tabindex:r},null,8,["name","value","modelValue","tabindex"]),e("label",null,h(t),1)])]))),128))])]),e("div",Be,[Ve,e("div",Fe,[(d(!0),p(D,null,S(n.equipmentDamageLevels,(t,r)=>(d(),p("div",{key:r,class:"field"},[e("div",Ge,[l(f,{name:t,value:t,modelValue:n.formState.EquipmentDamageLv,"onUpdate:modelValue":o[7]||(o[7]=m=>n.formState.EquipmentDamageLv=m),tabindex:r},null,8,["name","value","modelValue","tabindex"]),e("label",null,h(t),1)])]))),128))])]),e("div",qe,[We,e("div",Re,[(d(!0),p(D,null,S(n.affectOfEnviromentLevels,(t,r)=>(d(),p("div",{key:r,class:"field"},[e("div",Ue,[l(f,{name:t,value:t,modelValue:n.formState.AffectOfEnviroment,"onUpdate:modelValue":o[8]||(o[8]=m=>n.formState.AffectOfEnviroment=m),tabindex:r},null,8,["name","value","modelValue","tabindex"]),e("label",null,h(t),1)])]))),128))])]),e("div",Pe,[ze,e("div",He,[(d(!0),p(D,null,S(n.newsCoverageLevels,(t,r)=>(d(),p("div",{key:r,class:"field"},[e("div",Ye,[l(f,{name:t,value:t,modelValue:n.formState.NewsCoverage,"onUpdate:modelValue":o[9]||(o[9]=m=>n.formState.NewsCoverage=m),tabindex:r},null,8,["name","value","modelValue","tabindex"]),e("label",null,h(t),1)])]))),128))])]),e("div",Ke,[e("label",null,"Measures : "+h(s.calculateCategory()),1)])]),e("td",null,[e("div",Je,[l(g)])])])]),e("div",Qe,[e("div",Xe,[Ze,et,l(y,{modelValue:n.formState.Description,"onUpdate:modelValue":o[10]||(o[10]=t=>n.formState.Description=t),autoResize:"",rows:"6",cols:"160",id:"Discription"},null,8,["modelValue"])])]),e("div",tt,[l(c,{type:"button",label:"Cancel",severity:"secondary",onClick:o[11]||(o[11]=t=>i.$emit("close"))}),l(c,{type:"button",label:"Save",onClick:s.submitForm},null,8,["onClick"])])])])):U("",!0)]),_:1})}const R=I(le,[["render",ot]]),st=e("span",null,"search field:",-1),at=G('<option value="name">Name</option><option value="department">Department</option><option value="Date">Date</option><option value="Where">where</option><option value="typeOfAccident">Factor</option><option value="description">Date</option><option value="factor">Factor</option>',7),nt=[at],rt=e("span",null,"  ",-1),lt=e("span",null,"search value:",-1),it=e("br",null,null,-1),ct=e("br",null,null,-1),dt=z({__name:"Near_miss_list",setup(i){const o=w(!1),u=w(""),s=w(""),n=["NearMiss No.","Name","Department","Date","where?","Type of accident","Description/Learning","Factor","Injured lv","Equipment damage lv","Affect of enviroment","News coverage","Affect of quality","Measures","Need Action?","Solved Items?"],a=["desc","asc"],_=w([]),f=[{text:"NearMiss No.",value:"nearMissNo",sortable:!0},{text:"Name",value:"userName.userName",sortable:!0},{text:"Department",value:"department",sortable:!0},{text:"Date",value:"dateOfOccurrence",sortable:!0},{text:"Where?",value:"placeOfOccurrence",sortable:!0},{text:"Type of accident",value:"typeOfAccident",sortable:!0},{text:"Description/Learning",value:"description",sortable:!0},{text:"Factor",value:"factor",sortable:!0},{text:"Injured lv.",value:"injuredLv",sortable:!0},{text:"Equipment damage lv.",value:"equipmentDamageLv",sortable:!0},{text:"Affect of Enviroment",value:"affectOfEnviroment",sortable:!0},{text:"News coverage",value:"newsCoverage",sortable:!0},{text:"Measures",value:"measures",sortable:!0},{text:"Need Action?",value:"actionItems",sortable:!0},{text:"Solved Items?",value:"solvedItems",sortable:!0},{text:"updateDay",value:"updateDay",sortable:!0},{text:"Operation",value:"Operation"}],g=_.value;return E(async()=>{const c=$().companyCode;if(console.log("User Company Code:",c),!c){console.error("Error: No company code found for the user.");return}try{const t=`http://127.0.0.1:8000/api/nearMiss/nearMissByCompany/?companyCode=${c}`,r=await M.get(t);console.log("API Response:",r),console.log("Response data structure:",r.data),r.data&&r.data.length>0?(r.data.forEach(m=>{m.nearMissList&&m.nearMissList.length>0&&m.nearMissList.forEach(C=>{_.value.push(C)})}),console.log("Consolidated Near Miss Data:",_.value)):console.log("No data received or data structure is incorrect")}catch(t){console.error("Axios Error:",t),t.response&&console.log("Error Response:",t.response)}}),(y,c)=>{const t=v("EasyDataTable");return d(),p(D,null,[e("button",{id:"show-modal",onClick:c[0]||(c[0]=r=>o.value=!0)},"Show Modal"),(d(),V(H,{to:"body"},[l(R,{show:o.value,onClose:c[1]||(c[1]=r=>o.value=!1)},null,8,["show"])])),e("div",null,[st,j(e("select",{"onUpdate:modelValue":c[2]||(c[2]=r=>u.value=r)},nt,512),[[Y,u.value]]),rt,lt,j(e("input",{type:"text","onUpdate:modelValue":c[3]||(c[3]=r=>s.value=r)},null,512),[[F,s.value]]),it,ct,l(t,{"buttons-pagination":"",headers:f,items:K(g),alternating:"","search-field":u.value,"search-value":s.value,"sort-by":n,"sort-type":a,"multi-sort":""},{"item-description":b(r=>[e("span",null,h(r.description),1)]),"item-user.name":b(r=>[e("span",null,h(r.user.name),1)]),_:1},8,["items","search-field","search-value"])])],64)}}}),ut={data(){return{values:{},error:null}},mounted(){const o=$().companyCode;if(!o){console.error("Error: No company code found for the user.");return}const u=`http://127.0.0.1:8000/api/nearMiss/nearMissByCompany/?companyCode=${o}`;M.get(u,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(s=>{const n=s.data;console.log("nearMissData",n);const a=n.flatMap(c=>c.nearMissList);console.log("allNearMisses",a);const _=a.map(c=>c.typeOfAccident);console.log("typeArray:",_),this.values=_.reduce((c,t)=>(c[t]=(c[t]||0)+1,c),{});let f={type:"pie",values:Object.values(this.values),labels:Object.keys(this.values),textinfo:"label+percent",insidetextorientation:"radial"};const g={height:550,width:550,automargin:!0},y={responsive:!0};document.getElementById("SafeAccidentRate")?(console.log("Before plotting"),B.newPlot("SafeAccidentRate",[f],g,y),console.log("After plotting")):console.error("Element with id 'SafeAccidentRate' not found.")}).catch(s=>{console.error("Error fetching data:",s)})}},mt=e("div",{id:"SafeAccidentRate"},null,-1);function pt(i,o,u,s,n,a){return d(),p("div",null,[l(W,null,{default:b(()=>[l(q,null,{default:b(()=>[x("Safety Accident type (world)")]),_:1}),mt]),_:1})])}const ft=I(ut,[["render",pt]]),_t={data(){return{x:[],y:[]}},mounted(){const o=$().companyCode;if(!o){console.error("Error: No company code found for the user.");return}const u=`http://127.0.0.1:8000/api/nearMiss/nearMissByCompany/?companyCode=${o}`;M.get(u,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(s=>{const a=s.data.flatMap(y=>y.nearMissList).reduce((y,c)=>{const t=new Date(c.dateOfOccurrence).getFullYear();return y[t]=y[t]||{A:0,B:0,C:0,D:0,E:0},y[t][c.measures]++,y},{}),f=["A","B","C","D","E"].map(y=>({x:Object.keys(a),y:Object.values(a).map(c=>c[y]),type:"bar",name:y})),g={barmode:"stack",yaxis:{dtick:1}};B.newPlot("smt",f,g)})}},vt=e("div",{id:"smt"},null,-1);function ht(i,o,u,s,n,a){return d(),p("div",null,[l(W,null,{default:b(()=>[l(q,null,{default:b(()=>[x("Safety Measure trend")]),_:1}),vt]),_:1})])}const gt=I(_t,[["render",ht]]),yt={setup(){const i=w(""),o=$();E(async()=>{try{const a=(await M.get("http://127.0.0.1:8000/api/nearMiss/safetyIndicatorsByCompany/",{params:{companyCode:o.companyCode}})).data.find(_=>_.companyCode===o.companyCode);a&&a.safetyIndicatorsList.length>0&&(i.value=a.safetyIndicatorsList[0].safetyIndicators)}catch(n){console.error("Error fetching safety indicators:",n)}});const s=J(()=>{switch(i.value){case"High":return"text-red font-bold";case"Middle":return"text-yellow font-bold";case"Low":return"text-blue font-bold";default:return""}});return{safetyIndicators:i,safetyIndicatorsClass:s}}},bt={class:"card mb-0"},xt={class:"flex justify-content-between mb-3"},wt=e("span",{class:"block text-500 font-medium mb-3"},"Safety Indicators",-1),Ct=e("div",{class:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-map-marker text-orange-500 text-xl"})],-1),Dt=e("span",{class:"text-green-500 font-medium"},"%52+ ",-1),Nt=e("span",{class:"text-500"},"since last month",-1);function St(i,o,u,s,n,a){return d(),p("div",bt,[e("div",xt,[e("div",null,[wt,e("div",{class:O(s.safetyIndicatorsClass)},h(s.safetyIndicators),3)]),Ct]),Dt,Nt])}const Mt=I(yt,[["render",St]]),$t={setup(){const i=w(0),o=$();return E(async()=>{try{console.log("Fetching data with companyCode:",o.companyCode);const s=await M.get("http://127.0.0.1:8000/api/nearMiss/safetyIndicatorsByCompany/",{params:{companyCode:o.companyCode}});console.log("Response data:",s.data);const n=s.data.find(a=>a.companyCode===o.companyCode);n&&n.safetyIndicatorsList.length>0?i.value=n.safetyIndicatorsList[0].totalOfNearMiss:console.log("No matching data found for companyCode:",o.companyCode)}catch(s){console.error("Error fetching data:",s)}}),{nearMissTotal:i}}},It={class:"card mb-0"},At={class:"flex justify-content-between mb-3"},Lt=e("span",{class:"block text-500 font-medium mb-3"},"Number of near misses",-1),Et={class:"text-900 font-medium text-xl"},Ot=e("div",{class:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-map-marker text-orange-500 text-xl"})],-1),kt=e("span",{class:"text-green-500 font-medium"},"%52+ ",-1),Tt=e("span",{class:"text-500"},"since last month",-1);function jt(i,o,u,s,n,a){return d(),p("div",It,[e("div",At,[e("div",null,[Lt,e("div",Et,h(s.nearMissTotal)+"件",1)]),Ot]),kt,Tt])}const Bt=I($t,[["render",jt]]),Vt={setup(){const i=w(""),o=$();return E(async()=>{try{const a=(await M.get("http://127.0.0.1:8000/api/nearMiss/safetyIndicatorsByCompany/",{params:{companyCode:o.companyCode}})).data.find(_=>_.companyCode===o.companyCode);a&&a.safetyIndicatorsList&&a.safetyIndicatorsList.length>0?i.value=a.safetyIndicatorsList[0].dangerArea:console.log("Data is empty or does not contain safetyIndicatorsList for the specified companyCode")}catch(s){console.error("Error fetching danger area:",s)}}),{dangerArea:i}}},Ft={class:"card mb-0"},Gt={class:"flex justify-content-between mb-3"},qt=e("span",{class:"block text-500 font-medium mb-3"},"Relatively Dangerous Area",-1),Wt={class:"text-900 font-medium text-xl"},Rt=e("div",{class:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-map-marker text-orange-500 text-xl"})],-1),Ut=e("span",{class:"text-green-500 font-medium"},"%52+ ",-1),Pt=e("span",{class:"text-500"},"since last month",-1);function zt(i,o,u,s,n,a){return d(),p("div",Ft,[e("div",Gt,[e("div",null,[qt,e("div",Wt,h(s.dangerArea),1)]),Rt]),Ut,Pt])}const Ht=I(Vt,[["render",zt]]),Yt={setup(){const i=w(0),o=w(0),u=w(""),s=$();return E(async()=>{try{const f=(await M.get("http://127.0.0.1:8000/api/nearMiss/safetyIndicatorsByCompany/",{params:{companyCode:s.companyCode}})).data.find(g=>g.companyCode===s.companyCode);if(f&&f.safetyIndicatorsList&&f.safetyIndicatorsList.length>0){const g=f.safetyIndicatorsList[0];i.value=g.countOfActionItems,o.value=g.countOfSolvedActionItems,u.value=g.rateOfActionItems}else console.log("No safety indicators data available for the specified companyCode")}catch(a){console.error("Error fetching data:",a)}}),{countOfActionItems:i,countOfSolvedActionItems:o,rateOfActionItems:u}}},Kt={class:"card mb-0"},Jt={class:"flex justify-content-between mb-3"},Qt=e("span",{class:"block text-500 font-medium mb-3"},"Number of near misses",-1),Xt={class:"text-900 font-medium text-xl"},Zt={class:"text-900 font-medium text-xl"},eo={class:"text-900 font-medium text-xl"},to=e("div",{class:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-map-marker text-orange-500 text-xl"})],-1),oo=e("span",{class:"text-green-500 font-medium"},"%52+ ",-1),so=e("span",{class:"text-500"},"since last month",-1);function ao(i,o,u,s,n,a){return d(),p("div",Kt,[e("div",Jt,[e("div",null,[Qt,e("div",Xt,"Action Items: "+h(s.countOfActionItems),1),e("div",Zt,"Solved Action Items: "+h(s.countOfSolvedActionItems),1),e("div",eo,"Rate of Action Items: "+h(s.rateOfActionItems)+"%",1)]),to]),oo,so])}const no=I(Yt,[["render",ao]]),ro={components:{Near_miss_list:dt,Safety_factor_rate:Q,Safety_AccidentType_rate:ft,Safety_correlation_diagram:X,Safety_Measure_trend:gt,NearMiss_form:R,Safety_indicator_trend:Z,Safety_indicators_alert:Mt,Count_of_nearMiss:Bt,Danger_area:Ht,Action_items:no}},lo={class:"base-content"},io=G('<section class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1>Safety</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Dashboard</a></li><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">MECHPHAISTOS</li></ol></div></div></div></section>',1),co={class:"content"},uo={class:"card card-solid"},mo={class:"line-height-3 m-0",style:{"background-color":"#f0f0f0"}},po={class:"row"},fo={class:"col-12 lg:col-6 xl:col-3"},_o={class:"col-12 lg:col-6 xl:col-3"},vo={class:"col-12 lg:col-6 xl:col-3"},ho={class:"col-12 lg:col-6 xl:col-3"},go={class:"col-12 xl:col-12"},yo={class:"card",style:{"background-color":"#f2f2f2"}},bo=e("br",null,null,-1),xo={class:"col-12 xl:col-6"},wo={class:"card",style:{"background-color":"#f2f2f2"}},Co=e("br",null,null,-1),Do={class:"col-12 xl:col-6"},No={class:"card",style:{"background-color":"#f2f2f2"}},So=e("br",null,null,-1),Mo={class:"col-12 xl:col-12"},$o={class:"card",style:{"background-color":"#f2f2f2"}},Io=e("br",null,null,-1),Ao={class:"card",style:{"background-color":"#f2f2f2"}},Lo=e("br",null,null,-1),Eo=e("p",{class:"line-height-3 m-0"},null,-1),Oo=e("p",{class:"line-height-3 m-0"},null,-1);function ko(i,o,u,s,n,a){const _=v("Near_miss_list"),f=v("TabPanel"),g=v("Safety_indicators_alert"),y=v("Count_of_nearMiss"),c=v("Danger_area"),t=v("Action_items"),r=v("Safety_indicator_trend"),m=v("Message"),C=v("Safety_factor_rate"),A=v("Safety_AccidentType_rate"),L=v("Safety_Measure_trend"),N=v("Safety_correlation_diagram"),k=v("TabView");return d(),p("div",lo,[io,e("section",co,[e("div",uo,[l(k,null,{default:b(()=>[l(f,{header:"NearMiss List"},{default:b(()=>[e("p",mo,[l(_)])]),_:1}),l(f,{header:"Analyze"},{default:b(()=>[e("div",po,[e("div",fo,[l(g)]),e("div",_o,[l(y)]),e("div",vo,[l(c)]),e("div",ho,[l(t)]),e("div",go,[e("div",yo,[l(r),l(m,{closable:!1},{default:b(()=>[x("AI recommendation "),bo,x(" Now developing ")]),_:1})])]),e("div",xo,[e("div",wo,[l(C),l(m,{closable:!1},{default:b(()=>[x("AI recommendation "),Co,x(" Now developing ")]),_:1})])]),e("div",Do,[e("div",No,[l(A),l(m,{closable:!1},{default:b(()=>[x("AI recommendation "),So,x(" Now developing ")]),_:1})])])]),e("div",Mo,[e("div",$o,[l(L),l(m,{closable:!1},{default:b(()=>[x("AI recommendation "),Io,x(" Now developing ")]),_:1})])]),e("div",Ao,[l(N),l(m,{closable:!1},{default:b(()=>[x("AI recommendation "),Lo,x(" Now developing ")]),_:1})])]),_:1}),l(f,{header:"Target setting"},{default:b(()=>[x(" Now developing "),Eo]),_:1}),l(f,{header:"KYT"},{default:b(()=>[x(" Now developing "),Oo]),_:1})]),_:1})])])])}const Fo=I(ro,[["render",ko]]);export{Fo as default};
