import{P as w}from"./plotly.min-539e9c80.js";import{_,o as b,c as k,e as n,l as r,V as D,d as V,D as B,E as C,G as E,q as A,b as h,k as S,r as z}from"./index-c1603a00.js";const q={data(){return{xData:[[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2013],[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2013],[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2013],[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2013]],yData:[[74,82,80,74,73,72,74,70,70,66,66,69],[45,42,50,46,36,36,34,35,32,31,31,28],[13,14,20,24,20,24,24,40,35,41,43,50],[18,21,18,21,16,14,13,18,17,16,19,23]],colors:["rgba(67,67,67,1)","rgba(115,115,115,1)","rgba(49,130,189, 1)","rgba(189,189,189,1)"],lineSize:[2,2,4,2],labels:["Television","Newspaper","Internet","Radio"]}},mounted(){this.generateChart()},methods:{generateChart(){const l=[];for(let e=0;e<this.xData.length;e++){const o={x:this.xData[e],y:this.yData[e],type:"scatter",mode:"lines",line:{color:this.colors[e],width:this.lineSize[e]}},a={x:[this.xData[e][0],this.xData[e][11]],y:[this.yData[e][0],this.yData[e][11]],type:"scatter",mode:"markers",marker:{color:this.colors[e],size:12}};l.push(o,a)}const i={showlegend:!1,height:600,width:600,xaxis:{showline:!0,showgrid:!1,showticklabels:!0,linecolor:"rgb(204,204,204)",linewidth:2,autotick:!1,ticks:"outside",tickcolor:"rgb(204,204,204)",tickwidth:2,ticklen:5,tickfont:{family:"Arial",size:12,color:"rgb(82, 82, 82)"}},yaxis:{showgrid:!1,zeroline:!1,showline:!1,showticklabels:!1},autosize:!1,margin:{autoexpand:!1,l:100,r:20,t:100},annotations:[{xref:"paper",yref:"paper",x:0,y:1.05,xanchor:"left",yanchor:"bottom",text:"Main Source for News",font:{family:"Arial",size:30,color:"rgb(37,37,37)"},showarrow:!1},{xref:"paper",yref:"paper",x:.5,y:-.1,xanchor:"center",yanchor:"top",text:"Source: Pew Research Center & Storytelling with data",showarrow:!1,font:{family:"Arial",size:12,color:"rgb(150,150,150)"}}]};for(let e=0;e<this.xData.length;e++){const o={xref:"paper",x:.05,y:this.yData[e][0],xanchor:"right",yanchor:"middle",text:this.labels[e]+" "+this.yData[e][0]+"%",showarrow:!1,font:{family:"Arial",size:16,color:"black"}},a={xref:"paper",x:.95,y:this.yData[e][11],xanchor:"left",yanchor:"middle",text:this.yData[e][11]+"%",font:{family:"Arial",size:16,color:"black"},showarrow:!1};i.annotations.push(o,a)}w.newPlot("myDiv",l,i)}}},P=h("div",{id:"myDiv",style:{height:"600px",width:"600px"}},null,-1),L=h("p",null,"Source: Pew Research Center & Storytelling with data",-1);function N(l,i,e,o,a,s){return b(),k("div",null,[n(A,null,{default:r(()=>[n(D,null,{default:r(()=>[V("Main Source for News")]),_:1}),n(B,null,{default:r(()=>[n(C,null,{default:r(()=>[n(E,null,{default:r(()=>[P]),_:1})]),_:1}),n(C,null,{default:r(()=>[n(E,null,{default:r(()=>[L]),_:1})]),_:1})]),_:1})]),_:1})])}const Q=_(q,[["render",N]]),I={data(){return{values:{},error:null}},mounted(){S.get("http://127.0.0.1:8000/api/nearMiss/?format=json").then(l=>{const i=l.data.map(s=>s.factor);this.values=i.reduce((s,c)=>(s[c]=(s[c]||0)+1,s),{});let e={type:"pie",values:Object.values(this.values),labels:Object.keys(this.values),textinfo:"label+percent",insidetextorientation:"radial"};const o={width:500,height:500,automargin:!0},a={responsive:!0};document.getElementById("SafeRate")?(console.log("Before plotting"),w.newPlot("SafeRate",[e],o,a),console.log("After plotting")):console.error("Element with id 'SafeRate' not found.")}).catch(l=>{console.error("Error fetching data:",l)})}},T=h("div",{id:"SafeRate"},null,-1);function W(l,i,e,o,a,s){return b(),k("div",null,[n(A,null,{default:r(()=>[n(D,null,{default:r(()=>[V("Safety Accident type")]),_:1}),T]),_:1})])}const U=_(I,[["render",W]]),F={mounted(){S.get("http://127.0.0.1:8000/api/nearMiss/?format=json").then(l=>{const i=l.data,e={},o=i.map(t=>(t.department in e||(e[t.department]=Object.keys(e).length+1),e[t.department])),a={},s=i.map(t=>(t.where in a||(a[t.where]=Object.keys(a).length+1),a[t.where])),c=Object.keys(e).length,$=Object.keys(a).length,u={A:5,B:4,C:3,D:2,E:1},j={others:1,"protective equipment violation":2,"impossible movement":3,"traffic accIdent":4,conflagration:5,rupture:6,explosion:7,"electric shock":8,"contact with organic matter":9,"contact with hot or cold objects":10,drown:11,"treading on something sharp":12,"cut/Rubbing":13,"got caught up in":14,"hit by something":15,collapse:16,"accIdental fall":17,collision:18,"fall/slip":19,"fall down":20},O={others:1,Rule:2,Person:3,Methods:4,Equipment:5};let d=[],f=[],p=[],g=[],m=[],v=[],y=[];i.forEach(t=>{d.push(j[t.typeOfAccident]),f.push(O[t.factor]),p.push(u[t.injuredLv]),g.push(u[t.equipmentDamageLv]),m.push(u[t.affectOfEnviroment]),v.push(u[t.newsCoverage]),y.push(u[t.measures])}),console.log("departmentValues:",o),console.log("whereValues:",s),console.log("accidentTypeValues:",d),console.log("factorValues:",f),console.log("injuredLvValues:",p),console.log("equipmentDamageLvValues:",g),console.log("affectOfEnviromentValues:",m),console.log("newsCoverageValues:",v),console.log("measuresValues:",y);let M={type:"parcoords",line:{color:"blue"},dimensions:[{range:[1,c],label:"Department",values:o,tickvals:Array.from({length:o.length},(t,x)=>x+1),ticktext:Object.keys(e)},{range:[1,$],label:"Where",values:s,tickvals:Array.from({length:s.length},(t,x)=>x+1),ticktext:Object.keys(a)},{range:[1,20],label:"Accident type",values:d,tickvals:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],ticktext:["others","protective equipment violation","impossible movement","traffic accIdent","conflagration","rupture","explosion","electric shock","contact with organic matter","contact with hot or cold objects","drown","treading on something sharp","cut/Rubbing","got caught up in","hit by something","collapse","accIdental fall","collision","fall/slip","fall down"]},{range:[1,5],label:"Factor",values:f,tickvals:[1,2,3,4,5],ticktext:["others","Rule","Person","Methods","Equipment"]},{range:[1,5],label:"injured Lv",values:p,tickvals:[1,2,3,4,5],ticktext:["E","D","C","B","A"]},{range:[1,5],label:"Equipment Damage Lv",values:g,tickvals:[1,2,3,4,5],ticktext:["E","D","C","B","A"]},{range:[1,5],label:"Affect Of Enviroment",values:m,tickvals:[1,2,3,4,5],ticktext:["E","D","C","B","A"]},{range:[1,5],label:"News Coverage",values:v,tickvals:[1,2,3,4,5],ticktext:["E","D","C","B","A"]},{range:[1,5],label:"Measures",values:y,tickvals:[1,2,3,4,5],ticktext:["E","D","C","B","A"]}]};const R={width:1e3};w.newPlot("scd",[M],R)}).catch(l=>{console.error("データの取得に失敗しました",l)})}},G=h("div",{id:"scd"},null,-1);function H(l,i,e,o,a,s){const c=z("v-flex");return b(),k("div",null,[n(c,null,{default:r(()=>[n(A,null,{default:r(()=>[n(D,null,{default:r(()=>[V("Safety correlation diagram")]),_:1}),G]),_:1})]),_:1})])}const X=_(F,[["render",H]]);export{Q as S,U as a,X as b};
